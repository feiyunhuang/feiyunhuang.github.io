<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">


<script>
    (function () {
        if ('') {
            if (prompt('请输入文章密码') !== '') {
                alert('密码错误！');

                    history.back();
            }
        }
    })();
</script>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="HuangYunfei&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="HuangYunfei&#39;s Blog">
<meta property="article:author" content="HuangYunfei">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>HuangYunfei's Blog</title>
  














<meta name="generator" content="Hexo 4.2.0"></head>


   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>


<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">HuangYunfei's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/07/hexo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E7%89%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/07/hexo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E7%89%87/" itemprop="url">hexo博客图片</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-07T13:44:29+08:00">
                2020-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%9A%E5%AE%A2/" itemprop="url" rel="index">
                    <span itemprop="name">博客</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  414
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="hexo在文章中添加图片"><a href="#hexo在文章中添加图片" class="headerlink" title="hexo在文章中添加图片"></a>hexo在文章中添加图片</h1><p>在hexo博客中的文章插入图片</p>
<h2 id="1-安装插件"><a href="#1-安装插件" class="headerlink" title="1.安装插件"></a>1.安装插件</h2><p>在hexo的目录下执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>

<h2 id="2-修改配置"><a href="#2-修改配置" class="headerlink" title="2.修改配置"></a>2.修改配置</h2><ul>
<li><p>在_config.yml配置文件中，修改为 post_asset_folder: true</p>
</li>
<li><p>打开/node_modules/hexo-asset-image/index.js，将内容更换为下面的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">'cheerio'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">str, m, i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> version = <span class="built_in">String</span>(hexo.version).split(<span class="string">'.'</span>);</span><br><span class="line">hexo.extend.filter.register(<span class="string">'after_post_render'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.config;</span><br><span class="line">  <span class="keyword">if</span>(config.post_asset_folder)&#123;</span><br><span class="line">    	<span class="keyword">var</span> link = data.permalink;</span><br><span class="line">	<span class="keyword">if</span>(version.length &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">Number</span>(version[<span class="number">0</span>]) == <span class="number">3</span>)</span><br><span class="line">	   <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">'/'</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	   <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">'/'</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// In hexo 3.1.1, the permalink of "about" page is like ".../about/index.html".</span></span><br><span class="line">	<span class="keyword">var</span> endPos = link.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">'excerpt'</span>, <span class="string">'more'</span>, <span class="string">'content'</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class="line">        ignoreWhitespace: <span class="literal">false</span>,</span><br><span class="line">        xmlMode: <span class="literal">false</span>,</span><br><span class="line">        lowerCaseTags: <span class="literal">false</span>,</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">'img'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> ($(<span class="keyword">this</span>).attr(<span class="string">'src'</span>))&#123;</span><br><span class="line">			<span class="comment">// For windows style path, we replace '\' to '/'.</span></span><br><span class="line">			<span class="keyword">var</span> src = $(<span class="keyword">this</span>).attr(<span class="string">'src'</span>).replace(<span class="string">'\\'</span>, <span class="string">'/'</span>);</span><br><span class="line">			<span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.test(src) &amp;&amp;</span><br><span class="line">			   !<span class="regexp">/^\s*\//</span>.test(src)) &#123;</span><br><span class="line">			  <span class="comment">// For "about" page, the first part of "src" can't be removed.</span></span><br><span class="line">			  <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">			  <span class="keyword">var</span> linkArray = link.split(<span class="string">'/'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">''</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="keyword">var</span> srcArray = src.split(<span class="string">'/'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">''</span> &amp;&amp; elem != <span class="string">'.'</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="keyword">if</span>(srcArray.length &gt; <span class="number">1</span>)</span><br><span class="line">				srcArray.shift();</span><br><span class="line">			  src = srcArray.join(<span class="string">'/'</span>);</span><br><span class="line">			  $(<span class="keyword">this</span>).attr(<span class="string">'src'</span>, config.root + link + src);</span><br><span class="line">			  <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">"update link as:--&gt;"</span>+config.root + link + src);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">"no src attr, skipped..."</span>);</span><br><span class="line">			<span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info($(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="3-新建文章"><a href="#3-新建文章" class="headerlink" title="3.新建文章"></a>3.新建文章</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post hexo博文图片</span><br></pre></td></tr></table></figure>

<p>会自动生成一个.md文件 和与md文件同名的的文件夹</p>
<p><img src="/2020/03/07/hexo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E7%89%87/image-20200305135549127.png" alt="image-20200305135549127"></p>
<p>将图片放在文件夹中，采用相对路径插入</p>
<p><img src="/2020/03/07/hexo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E7%89%87/image-20200305135654502.png" alt="image-20200305135654502"></p>

          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/27/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/27/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url">设计模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-27T14:51:31+08:00">
                2020-06-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  53
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><p><strong>饿汉式</strong></p>
<p>（线程安全），全局的单例实例在类装载时构建。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>懒汉式</strong></p>

          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/16/OS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/16/OS/" itemprop="url">OS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-16T08:28:03+08:00">
                2020-04-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  0
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/05/JVM%E5%A4%8D%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/05/JVM%E5%A4%8D%E4%B9%A0/" itemprop="url">JVM复习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-05T20:31:33+08:00">
                2020-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JVM/" itemprop="url" rel="index">
                    <span itemprop="name">JVM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  4.5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  15
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="运行时数据区域"><a href="#运行时数据区域" class="headerlink" title="运行时数据区域"></a>运行时数据区域</h3><p><img src="/2020/04/05/JVM%E5%A4%8D%E4%B9%A0/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA.png" alt="Java虚拟机运行时数据区"></p>
<h4 id="程序计数器"><a href="#程序计数器" class="headerlink" title="程序计数器"></a>程序计数器</h4><p>一块较小的内存空间，当前线程所执行的字节码的行号指示器。通过改变它可以选取下一条需要执行的字节码指令。程序控制流程的指示器，分支、循环、跳转、异常处理、线程恢复等功能都依赖这个计数器来完成。</p>
<p>如果线程正在执行的是一个Java方法，这个计数器记录的是正在执行的虚拟机字节码指令的地址；如果正在执行的是本地（Native）方法，这个计数器值则应为空（Undefined）此内存区域是唯一一个在《Java虚拟机规范》中没有规定任何OutOfMemoryError情况的区域。</p>
<h1 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h1><hr>
<p>Java 虚拟机所管理的内存中最大的一块，Java 堆是所有线程共享的一块内存区域，在虚拟机启动时创建。<strong>此内存区域的唯一目的就是存放对象实例，几乎所有的对象实例以及数组都在这里分配内存。</strong></p>
<p>Java 堆是垃圾收集器管理的主要区域，因此也被称作<strong>GC 堆（Garbage Collected Heap）</strong>.从垃圾回收的角度，由于现在收集器基本都采用分代垃圾收集算法，所以 Java 堆还可以细分为：新生代和老年代：再细致一点有：Eden 空间、From Survivor、To Survivor 空间等。<strong>进一步划分的目的是更好地回收内存，或者更快地分配内存。</strong></p>
<p>在 JDK 7 版本及JDK 7 版本之前，堆内存被通常被分为下面三部分：</p>
<ol>
<li>新生代内存(Young Generation)</li>
<li>老生代(Old Generation)</li>
<li>永生代(Permanent Generation)</li>
</ol>
<p>大部分情况，对象都会首先在 Eden 区域分配，在一次新生代垃圾回收后，如果对象还存活，则会进入 s0 或者 s1，并且对象的年龄还会加 1(Eden 区-&gt;Survivor 区后对象的初始年龄变为 1)，当它的年龄增加到一定程度（默认为 15 岁），就会被晋升到老年代中。对象晋升到老年代的年龄阈值，可以通过参数 <code>-XX:MaxTenuringThreshold</code> 来设置。</p>
<h1 id="方法区"><a href="#方法区" class="headerlink" title="方法区"></a>方法区</h1><hr>
<p>JDK 1.8 之前永久代还没被彻底移除的时候通常通过下面这些参数来调节方法区大小</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-XX:PermSize&#x3D;N &#x2F;&#x2F;方法区 (永久代) 初始大小</span><br><span class="line">-XX:MaxPermSize&#x3D;N &#x2F;&#x2F;方法区 (永久代) 最大大小,超过这个值将会抛出 OutOfMemoryError 异常:java.lang.OutOfMemory</span><br></pre></td></tr></table></figure>

<h3 id="运行时常量池"><a href="#运行时常量池" class="headerlink" title="运行时常量池"></a>运行时常量池</h3><p>运行时常量池是方法区的一部分。Class 文件中除了有类的版本、字段、方法、接口等描述信息外，还有常量池信息（用于存放编译期生成的各种字面量和符号引用）</p>
<p>既然运行时常量池是方法区的一部分，自然受到方法区内存的限制，当常量池无法再申请到内存时会抛出 OutOfMemoryError 错误。</p>
<p><strong>JDK1.7 及之后版本的 JVM 已经将运行时常量池从方法区中移了出来，在 Java 堆（Heap）中开辟了一块区域存放运行时常量池。</strong></p>
<h1 id="HotSpot-虚拟机对象探秘"><a href="#HotSpot-虚拟机对象探秘" class="headerlink" title="HotSpot 虚拟机对象探秘"></a>HotSpot 虚拟机对象探秘</h1><hr>
<p><img src="/2020/04/05/JVM%E5%A4%8D%E4%B9%A0/image-20200411130808719.png" alt="image-20200411130808719"></p>
<h4 id="Step1-类加载检查"><a href="#Step1-类加载检查" class="headerlink" title="Step1:类加载检查"></a>Step1:类加载检查</h4><p>虚拟机遇到一条 new 指令时，首先将去检查这个指令的参数是否能在常量池中定位到这个类的符号引用，并且检查这个符号引用代表的类是否已被加载过、解析和初始化过。如果没有，那必须先执行相应的类加载过程。</p>
<h4 id="Step2-分配内存"><a href="#Step2-分配内存" class="headerlink" title="Step2:分配内存"></a>Step2:分配内存</h4><p>在<strong>类加载检查</strong>通过后，接下来虚拟机将为新生对象<strong>分配内存</strong>。对象所需的内存大小在类加载完成后便可确定，为对象分配空间的任务等同于把一块确定大小的内存从 Java 堆中划分出来。<strong>分配方式</strong>有 <strong>“指针碰撞”</strong> 和 <strong>“空闲列表”</strong> 两种，<strong>选择那种分配方式由 Java 堆是否规整决定，而 Java 堆是否规整又由所采用的垃圾收集器是否带有压缩整理功能决定</strong>。</p>
<p><strong>内存分配的两种方式：（补充内容，需要掌握）</strong></p>
<p>选择以上两种方式中的哪一种，取决于 Java 堆内存是否规整。而 Java 堆内存是否规整，取决于 GC 收集器的算法是”标记-清除”，还是”标记-整理”（也称作”标记-压缩”），值得注意的是，复制算法内存也是规整的</p>
<p><strong>内存分配并发问题（补充内容，需要掌握）</strong></p>
<p>在创建对象的时候有一个很重要的问题，就是线程安全，因为在实际开发过程中，创建对象是很频繁的事情，作为虚拟机来说，必须要保证线程是安全的，通常来讲，虚拟机采用两种方式来保证线程安全：</p>
<ul>
<li><strong>CAS+失败重试：</strong> CAS 是乐观锁的一种实现方式。所谓乐观锁就是，每次不加锁而是假设没有冲突而去完成某项操作，如果因为冲突失败就重试，直到成功为止。<strong>虚拟机采用 CAS 配上失败重试的方式保证更新操作的原子性。</strong></li>
<li><strong>TLAB：</strong> 为每一个线程预先在 Eden 区分配一块儿内存，JVM 在给线程中的对象分配内存时，首先在 TLAB 分配，当对象大于 TLAB 中的剩余内存或 TLAB 的内存已用尽时，再采用上述的 CAS 进行内存分配</li>
</ul>
<h4 id="Step3-初始化零值"><a href="#Step3-初始化零值" class="headerlink" title="Step3:初始化零值"></a>Step3:初始化零值</h4><p>内存分配完成后，虚拟机需要将分配到的内存空间都初始化为零值（不包括对象头），这一步操作保证了对象的实例字段在 Java 代码中可以不赋初始值就直接使用，程序能访问到这些字段的数据类型所对应的零值。</p>
<h4 id="Step4-设置对象头"><a href="#Step4-设置对象头" class="headerlink" title="Step4:设置对象头"></a>Step4:设置对象头</h4><p>初始化零值完成之后，<strong>虚拟机要对对象进行必要的设置</strong>，例如这个对象是那个类的实例、如何才能找到类的元数据信息、对象的哈希码、对象的 GC 分代年龄等信息。 <strong>这些信息存放在对象头中。</strong> 另外，根据虚拟机当前运行状态的不同，如是否启用偏向锁等，对象头会有不同的设置方式。</p>
<h4 id="Step5-执行-init-方法"><a href="#Step5-执行-init-方法" class="headerlink" title="Step5:执行 init 方法"></a>Step5:执行 init 方法</h4><p>在上面工作都完成之后，从虚拟机的视角来看，一个新的对象已经产生了，但从 Java 程序的视角来看，对象创建才刚开始，<code>&lt;init&gt;</code> 方法还没有执行，所有的字段都还为零。所以一般来说，执行 new 指令之后会接着执行 <code>&lt;init&gt;</code> 方法，把对象按照程序员的意愿进行初始化，这样一个真正可用的对象才算完全产生出来。</p>
<h1 id="JVM-垃圾回收"><a href="#JVM-垃圾回收" class="headerlink" title="JVM 垃圾回收"></a>JVM 垃圾回收</h1><hr>
<p> eden 区、s0(“From”) 区、s1(“To”) 区都属于新生代，tentired 区属于老年代。大部分情况，对象都会首先在 Eden 区域分配，在一次新生代垃圾回收后，如果对象还存活，则会进入 s1(“To”)，并且对象的年龄还会加 1(Eden 区-&gt;Survivor 区后对象的初始年龄变为 1)，当它的年龄增加到一定程度（默认为 15 岁），就会被晋升到老年代中。对象晋升到老年代的年龄阈值，可以通过参数 <code>-XX:MaxTenuringThreshold</code> 来设置。经过这次GC后，Eden区和”From”区已经被清空。这个时候，”From”和”To”会交换他们的角色，也就是新的”To”就是上次GC前的“From”，新的”From”就是上次GC前的”To”。不管怎样，都会保证名为To的Survivor区域是空的。Minor GC会一直重复这样的过程，直到“To”区被填满，”To”区被填满之后，会将所有对象移动到老年代中。</p>
<h3 id="1-2-大对象直接进入老年代"><a href="#1-2-大对象直接进入老年代" class="headerlink" title="1.2 大对象直接进入老年代"></a>1.2 大对象直接进入老年代</h3><p>大对象就是需要大量连续内存空间的对象（比如：字符串、数组）。</p>
<p><strong>为什么要这样呢？</strong></p>
<p>为了避免为大对象分配内存时由于分配担保机制带来的复制而降低效率。</p>
<h3 id="1-3-长期存活的对象将进入老年代"><a href="#1-3-长期存活的对象将进入老年代" class="headerlink" title="1.3 长期存活的对象将进入老年代"></a>1.3 长期存活的对象将进入老年代</h3><p>既然虚拟机采用了分代收集的思想来管理内存，那么内存回收时就必须能识别哪些对象应放在新生代，哪些对象应放在老年代中。为了做到这一点，虚拟机给每个对象一个对象年龄（Age）计数器。</p>
<p>如果对象在 Eden 出生并经过第一次 Minor GC 后仍然能够存活，并且能被 Survivor 容纳的话，将被移动到 Survivor 空间中，并将对象年龄设为 1.对象在 Survivor 中每熬过一次 MinorGC,年龄就增加 1 岁，当它的年龄增加到一定程度（默认为 15 岁），就会被晋升到老年代中。对象晋升到老年代的年龄阈值，可以通过参数 <code>-XX:MaxTenuringThreshold</code> 来设置。</p>
<h3 id="1-4-动态对象年龄判定"><a href="#1-4-动态对象年龄判定" class="headerlink" title="1.4 动态对象年龄判定"></a>1.4 动态对象年龄判定</h3><p>大部分情况，对象都会首先在 Eden 区域分配，在一次新生代垃圾回收后，如果对象还存活，则会进入 s0 或者 s1，并且对象的年龄还会加 1(Eden 区-&gt;Survivor 区后对象的初始年龄变为 1)，当它的年龄增加到一定程度（默认为 15 岁），就会被晋升到老年代中。对象晋升到老年代的年龄阈值，可以通过参数 <code>-XX:MaxTenuringThreshold</code> 来设置。</p>
<h2 id="2-对象已经死亡？"><a href="#2-对象已经死亡？" class="headerlink" title="2 对象已经死亡？"></a>2 对象已经死亡？</h2><p><img src="/2020/04/05/JVM%E5%A4%8D%E4%B9%A0/image-20200411134817976.png" alt="image-20200411134817976"></p>
<h3 id="2-1-引用计数法"><a href="#2-1-引用计数法" class="headerlink" title="2.1 引用计数法"></a>2.1 引用计数法</h3><p>给对象中添加一个引用计数器，每当有一个地方引用它，计数器就加 1；当引用失效，计数器就减 1；任何时候计数器为 0 的对象就是不可能再被使用的。</p>
<p><strong>这个方法实现简单，效率高，但是目前主流的虚拟机中并没有选择这个算法来管理内存，其最主要的原因是它很难解决对象之间相互循环引用的问题。</strong> 所谓对象之间的相互引用问题，如下面代码所示：除了对象 objA 和 objB 相互引用着对方之外，这两个对象之间再无任何引用。但是他们因为互相引用对方，导致它们的引用计数器都不为 0，于是引用计数算法无法通知 GC 回收器回收他们。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReferenceCountingGc</span> </span>&#123;</span><br><span class="line">    Object instance = <span class="keyword">null</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ReferenceCountingGc objA = <span class="keyword">new</span> ReferenceCountingGc();</span><br><span class="line">		ReferenceCountingGc objB = <span class="keyword">new</span> ReferenceCountingGc();</span><br><span class="line">		objA.instance = objB;</span><br><span class="line">		objB.instance = objA;</span><br><span class="line">		objA = <span class="keyword">null</span>;</span><br><span class="line">		objB = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-可达性分析算法"><a href="#2-2-可达性分析算法" class="headerlink" title="2.2 可达性分析算法"></a>2.2 可达性分析算法</h3><p>这个算法的基本思想就是通过一系列的称为 <strong>“GC Roots”</strong> 的对象作为起点，从这些节点开始向下搜索，节点所走过的路径称为引用链，当一个对象到 GC Roots 没有任何引用链相连的话，则证明此对象是不可用的。</p>
<p><strong><em>Java中可以作为GC Roots的对象</em></strong></p>
<hr>
<ol>
<li>虚拟机（栈帧中的本地变量表）中引用的对象</li>
<li>方法区中类静态属性引用的对象</li>
<li>方法区中常量引用的对象</li>
<li>本地方法栈中JNI（即一般说的native方法）中引用的对象</li>
</ol>
<h3 id="2-3-再谈引用"><a href="#2-3-再谈引用" class="headerlink" title="2.3 再谈引用"></a>2.3 再谈引用</h3><p>无论是通过引用计数法判断对象引用数量，还是通过可达性分析法判断对象的引用链是否可达，判定对象的存活都与“引用”有关。</p>
<p>JDK1.2 之前，Java 中引用的定义很传统：如果 reference 类型的数据存储的数值代表的是另一块内存的起始地址，就称这块内存代表一个引用。</p>
<p>JDK1.2 以后，Java 对引用的概念进行了扩充，将引用分为强引用、软引用、弱引用、虚引用四种（引用强度逐渐减弱）</p>
<p><strong>1．强引用（StrongReference）</strong></p>
<p>以前我们使用的大部分引用实际上都是强引用，这是使用最普遍的引用。如果一个对象具有强引用，那就类似于<strong>必不可少的生活用品</strong>，垃圾回收器绝不会回收它。当内存空间不足，Java 虚拟机宁愿抛出 OutOfMemoryError 错误，使程序异常终止，也不会靠随意回收具有强引用的对象来解决内存不足问题。</p>
<p><strong>2．软引用（SoftReference）</strong></p>
<p>如果一个对象只具有软引用，那就类似于<strong>可有可无的生活用品</strong>。如果内存空间足够，垃圾回收器就不会回收它，如果内存空间不足了，就会回收这些对象的内存。只要垃圾回收器没有回收它，该对象就可以被程序使用。软引用可用来实现内存敏感的高速缓存。</p>
<p>软引用可以和一个引用队列（ReferenceQueue）联合使用，如果软引用所引用的对象被垃圾回收，JAVA 虚拟机就会把这个软引用加入到与之关联的引用队列中。</p>
<p><strong>3．弱引用（WeakReference）</strong></p>
<p>如果一个对象只具有弱引用，那就类似于<strong>可有可无的生活用品</strong>。弱引用与软引用的区别在于：只具有弱引用的对象拥有更短暂的生命周期。在垃圾回收器线程扫描它所管辖的内存区域的过程中，一旦发现了只具有弱引用的对象，不管当前内存空间足够与否，都会回收它的内存。不过，由于垃圾回收器是一个优先级很低的线程， 因此不一定会很快发现那些只具有弱引用的对象。</p>
<p>弱引用可以和一个引用队列（ReferenceQueue）联合使用，如果弱引用所引用的对象被垃圾回收，Java 虚拟机就会把这个弱引用加入到与之关联的引用队列中。</p>
<p><strong>4．虚引用（PhantomReference）</strong></p>
<p>“虚引用”顾名思义，就是形同虚设，与其他几种引用都不同，虚引用并不会决定对象的生命周期。如果一个对象仅持有虚引用，那么它就和没有任何引用一样，在任何时候都可能被垃圾回收。</p>
<p><strong>虚引用主要用来跟踪对象被垃圾回收的活动</strong>。</p>
<p><strong>虚引用与软引用和弱引用的一个区别在于：</strong> 虚引用必须和引用队列（ReferenceQueue）联合使用。当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会在回收对象的内存之前，把这个虚引用加入到与之关联的引用队列中。程序可以通过判断引用队列中是否已经加入了虚引用，来了解被引用的对象是否将要被垃圾回收。程序如果发现某个虚引用已经被加入到引用队列，那么就可以在所引用的对象的内存被回收之前采取必要的行动。</p>
<p>特别注意，在程序设计中一般很少使用弱引用与虚引用，使用软引用的情况较多，这是因为<strong>软引用可以加速 JVM 对垃圾内存的回收速度，可以维护系统的运行安全，防止内存溢出（OutOfMemory）等问题的产生</strong>。</p>
<h3 id="2-4-不可达的对象并非“非死不可”"><a href="#2-4-不可达的对象并非“非死不可”" class="headerlink" title="2.4 不可达的对象并非“非死不可”"></a>2.4 不可达的对象并非“非死不可”</h3><p>即使在可达性分析法中不可达的对象，也并非是“非死不可”的，这时候它们暂时处于“缓刑阶段”，要真正宣告一个对象死亡，至少要经历两次标记过程；可达性分析法中不可达的对象被第一次标记并且进行一次筛选，筛选的条件是此对象是否有必要执行 finalize 方法。当对象没有覆盖 finalize 方法，或 finalize 方法已经被虚拟机调用过时，虚拟机将这两种情况视为没有必要执行。</p>
<p>被判定为需要执行的对象将会被放在一个队列中进行第二次标记，除非这个对象与引用链上的任何一个对象建立关联，否则就会被真的回收。</p>
<h3 id="2-5-如何判断一个常量是废弃常量"><a href="#2-5-如何判断一个常量是废弃常量" class="headerlink" title="2.5 如何判断一个常量是废弃常量"></a>2.5 如何判断一个常量是废弃常量</h3><p>运行时常量池主要回收的是废弃的常量。那么，我们如何判断一个常量是废弃常量呢？</p>
<p>假如在常量池中存在字符串 “abc”，如果当前没有任何 String 对象引用该字符串常量的话，就说明常量 “abc” 就是废弃常量，如果这时发生内存回收的话而且有必要的话，”abc” 就会被系统清理出常量池。</p>
<p>注意：我们在 <a href="https://mp.weixin.qq.com/s?__biz=MzU4NDQ4MzU5OA==&mid=2247484303&idx=1&sn=af0fd436cef755463f59ee4dd0720cbd&chksm=fd9855eecaefdcf8d94ac581cfda4e16c8a730bda60c3b50bc55c124b92f23b6217f7f8e58d5&token=506869459&lang=zh_CN#rd" target="_blank" rel="noopener">可能是把 Java 内存区域讲的最清楚的一篇文章 </a>也讲了 JDK1.7 及之后版本的 JVM 已经将运行时常量池从方法区中移了出来，在 Java 堆（Heap）中开辟了一块区域存放运行时常量池。</p>
<h3 id="2-6-如何判断一个类是无用的类"><a href="#2-6-如何判断一个类是无用的类" class="headerlink" title="2.6 如何判断一个类是无用的类"></a>2.6 如何判断一个类是无用的类</h3><p>方法区主要回收的是无用的类，那么如何判断一个类是无用的类的呢？</p>
<p>判定一个常量是否是“废弃常量”比较简单，而要判定一个类是否是“无用的类”的条件则相对苛刻许多。类需要同时满足下面 3 个条件才能算是 <strong>“无用的类”</strong> ：</p>
<ul>
<li>该类所有的实例都已经被回收，也就是 Java 堆中不存在该类的任何实例。</li>
<li>加载该类的 ClassLoader 已经被回收。</li>
<li>该类对应的 java.lang.Class 对象没有在任何地方被引用，无法在任何地方通过反射访问该类的方法。</li>
</ul>
<p>虚拟机可以对满足上述 3 个条件的无用类进行回收，这里说的仅仅是“可以”，而并不是和对象一样不使用了就会必然被回收。</p>

          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/05/Java%E5%B9%B6%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/05/Java%E5%B9%B6%E5%8F%91/" itemprop="url">Java并发</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-05T20:31:14+08:00">
                2020-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E5%B9%B6%E5%8F%91/" itemprop="url" rel="index">
                    <span itemprop="name">Java并发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  1.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  5
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Java并发"><a href="#Java并发" class="headerlink" title="Java并发"></a>Java并发</h1><h2 id="并发容器"><a href="#并发容器" class="headerlink" title="并发容器"></a>并发容器</h2><p><strong>ConcurrentHashMap的分段锁的实现原理</strong></p>
<p>ConcurrentHashMap成员变量使用volatile 修饰，免除了指令重排序，同时保证内存可见性，另外使用CAS操作和synchronized结合实现赋值操作，多线程操作只会锁住当前操作索引的节点。</p>
<p><strong>为什么说HashMap线程不安全？</strong></p>
<p>1、put的时候导致的多线程数据不一致。<br> 这个问题比较好想象，比如有两个线程A和B，首先A希望插入一个key-value对到HashMap中，首先计算记录所要落到的桶的索引坐标，然后获取到该桶里面的链表头结点，此时线程A的时间片用完了，而此时线程B被调度得以执行，和线程A一样执行，只不过线程B成功将记录插到了桶里面，假设线程A插入的记录计算出来的桶索引和线程B要插入的记录计算出来的桶索引是一样的，那么当线程B成功插入之后，线程A再次被调度运行时，它依然持有过期的链表头但是它对此一无所知，以至于它认为它应该这样做，如此一来就覆盖了线程B插入的记录，这样线程B插入的记录就凭空消失了，造成了数据不一致的行为。</p>
<p>2、另外一个比较明显的线程不安全的问题是HashMap的get操作可能因为resize而引起死循环（cpu100%），具体分析如下：</p>
<p>下面的代码是resize的核心内容：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Entry[] newTable, <span class="keyword">boolean</span> rehash)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">int</span> newCapacity = newTable.length;  </span><br><span class="line">        <span class="keyword">for</span> (Entry&lt;K,V&gt; e : table) &#123;  </span><br><span class="line">  </span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">null</span> != e) &#123;  </span><br><span class="line">                Entry&lt;K,V&gt; next = e.next;           </span><br><span class="line">                <span class="keyword">if</span> (rehash) &#123;  </span><br><span class="line">                    e.hash = <span class="keyword">null</span> == e.key ? <span class="number">0</span> : hash(e.key);  </span><br><span class="line">                &#125;  </span><br><span class="line">                <span class="keyword">int</span> i = indexFor(e.hash, newCapacity);   </span><br><span class="line">                e.next = newTable[i];  </span><br><span class="line">                newTable[i] = e;  </span><br><span class="line">                e = next;  </span><br><span class="line">            &#125; </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2020/04/05/Java%E5%B9%B6%E5%8F%91/image-20200412141956431.png" alt="image-20200412141956431"></p>
<p>我们假设有两个线程同时需要执行resize操作，我们原来的桶数量为2，记录数为3，需要resize桶到4，原来的记录分别为：[3,A],[7,B],[5,C]，在原来的map里面，我们发现这三个entry都落到了第二个桶里面。<br> 假设线程thread1执行到了transfer方法的Entry next = e.next这一句，然后时间片用完了，此时的e = [3,A], next = [7,B]。线程thread2被调度执行并且顺利完成了resize操作，需要注意的是，此时的[7,B]的next为[3,A]。此时线程thread1重新被调度运行，此时的thread1持有的引用是已经被thread2 resize之后的结果。线程thread1首先将[3,A]迁移到新的数组上，然后再处理[7,B]，而[7,B]被链接到了[3,A]的后面，处理完[7,B]之后，就需要处理[7,B]的next了啊，而通过thread2的resize之后，[7,B]的next变为了[3,A]，此时，[3,A]和[7,B]形成了环形链表，在get的时候，如果get的key的桶索引和[3,A]和[7,B]一样，那么就会陷入死循环。</p>
<p>如果在取链表的时候从头开始取（现在是从尾部开始取）的话，则可以保证节点之间的顺序，那样就不存在这样的问题了。</p>
<p>综合上面两点，可以说明HashMap是线程不安全的。</p>
<h1 id="ReentranLock"><a href="#ReentranLock" class="headerlink" title="ReentranLock"></a>ReentranLock</h1><hr>
<p>AQS核心是自旋、</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">tryAcquire</span><span class="params">(<span class="keyword">int</span> acquires)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">final</span> Thread current = Thread.currentThread();</span><br><span class="line">            <span class="keyword">int</span> c = getState();</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!hasQueuedPredecessors() &amp;&amp;</span><br><span class="line">                    compareAndSetState(<span class="number">0</span>, acquires)) &#123;</span><br><span class="line">                    setExclusiveOwnerThread(current);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (current == getExclusiveOwnerThread()) &#123;</span><br><span class="line">              <span class="comment">//可重入的体现</span></span><br><span class="line">                <span class="keyword">int</span> nextc = c + acquires;</span><br><span class="line">                <span class="keyword">if</span> (nextc &lt; <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"Maximum lock count exceeded"</span>);</span><br><span class="line">                setState(nextc);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">acquire</span><span class="params">(<span class="keyword">int</span> arg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!tryAcquire(arg) &amp;&amp;</span><br><span class="line">            acquireQueued(addWaiter(Node.EXCLUSIVE), arg))</span><br><span class="line">            selfInterrupt();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p>入队，AQS的对头所对应的Node里的Thread始终为空</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">addWaiter</span><span class="params">(Node mode)</span> </span>&#123;</span><br><span class="line">        Node node = <span class="keyword">new</span> Node(Thread.currentThread(), mode);</span><br><span class="line">        <span class="comment">// Try the fast path of enq; backup to full enq on failure</span></span><br><span class="line">        Node pred = tail;</span><br><span class="line">        <span class="keyword">if</span> (pred != <span class="keyword">null</span>) &#123;</span><br><span class="line">            node.prev = pred;</span><br><span class="line">            <span class="keyword">if</span> (compareAndSetTail(pred, node)) &#123;</span><br><span class="line">                pred.next = node;</span><br><span class="line">                <span class="keyword">return</span> node;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        enq(node);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p>入队，第二个线程的话入队后先判断能不能拿到锁（自旋一次）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">acquireQueued</span><span class="params">(<span class="keyword">final</span> Node node, <span class="keyword">int</span> arg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> failed = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">boolean</span> interrupted = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">                <span class="keyword">final</span> Node p = node.predecessor();</span><br><span class="line">                <span class="keyword">if</span> (p == head &amp;&amp; tryAcquire(arg)) &#123;</span><br><span class="line">                    setHead(node);</span><br><span class="line">                    p.next = <span class="keyword">null</span>; <span class="comment">// help GC</span></span><br><span class="line">                    failed = <span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">return</span> interrupted;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (shouldParkAfterFailedAcquire(p, node) &amp;&amp;</span><br><span class="line">                    parkAndCheckInterrupt())</span><br><span class="line">                    interrupted = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (failed)</span><br><span class="line">                cancelAcquire(node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">shouldParkAfterFailedAcquire</span><span class="params">(Node pred, Node node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ws = pred.waitStatus;</span><br><span class="line">        <span class="keyword">if</span> (ws == Node.SIGNAL)</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * This node has already set status asking a release</span></span><br><span class="line"><span class="comment">             * to signal it, so it can safely park.</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (ws &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * Predecessor was cancelled. Skip over predecessors and</span></span><br><span class="line"><span class="comment">             * indicate retry.</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                node.prev = pred = pred.prev;</span><br><span class="line">            &#125; <span class="keyword">while</span> (pred.waitStatus &gt; <span class="number">0</span>);</span><br><span class="line">            pred.next = node;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * waitStatus must be 0 or PROPAGATE.  Indicate that we</span></span><br><span class="line"><span class="comment">             * need a signal, but don't park yet.  Caller will need to</span></span><br><span class="line"><span class="comment">             * retry to make sure it cannot acquire before parking.</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            compareAndSetWaitStatus(pred, ws, Node.SIGNAL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>多自旋一次，上一个节点，判断的是上一个节点，ws = 0，先改成-1，再死循环进来判断</p>
<p>自己不改自己的状态，因为自己休眠了</p>
<p>ws = 0，必要的状态，并且尽量不park， 因为park比较重量级</p>
<h1 id="Java锁事"><a href="#Java锁事" class="headerlink" title="Java锁事"></a>Java锁事</h1><hr>
<p><a href="https://tech.meituan.com/2018/11/15/java-lock.html" target="_blank" rel="noopener">https://tech.meituan.com/2018/11/15/java-lock.html</a></p>

          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/05/%E6%95%B0%E6%8D%AE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/05/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url">数据库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-05T20:30:55+08:00">
                2020-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  5.6k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  20
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><h2 id="1-MVCC"><a href="#1-MVCC" class="headerlink" title="1.MVCC"></a>1.MVCC</h2><p><img src="/2020/04/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mvcc.png" alt="mvcc"></p>
<p>每行记录记录后面保存两个隐藏的列，两个列，一个保存行的创建时间，一个保存行的过期时间（或删除时间），保当然存储的不是实际的时间，而是系统版本号。每开始一个一个新的事务，系统版本号就会自动递增。事务开始时刻的系统版本号会作为事务的版本号，用来和查询到的每行记录的版本号进行比较。</p>
<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><p>MySQL索引使用的数据结构主要有<strong>BTree索引</strong> 和 <strong>哈希索引</strong> 。对于哈希索引来说，底层的数据结构就是哈希表，因此在绝大多数需求为单条记录查询的时候，可以选择哈希索引，查询性能最快；其余大部分场景，建议选择BTree索引。</p>
<p>MySQL的BTree索引使用的是B树中的B+Tree，但对于主要的两种存储引擎的实现方式是不同的。</p>
<ul>
<li><strong>MyISAM:</strong> B+Tree叶节点的data域存放的是数据记录的地址。在索引检索的时候，首先按照B+Tree搜索算法搜索索引，如果指定的Key存在，则取出其 data 域的值，然后以 data 域的值为地址读取相应的数据记录。这被称为“非聚簇索引”。</li>
<li><strong>InnoDB:</strong> 其数据文件本身就是索引文件。相比MyISAM，索引文件和数据文件是分离的，其表数据文件本身就是按B+Tree组织的一个索引结构，树的叶节点data域保存了完整的数据记录。这个索引的key是数据表的主键，因此InnoDB表数据文件本身就是主索引。这被称为“聚簇索引（或聚集索引）”。而其余的索引都作为辅助索引，辅助索引的data域存储相应记录主键的值而不是地址，这也是和MyISAM不同的地方。<strong>在根据主索引搜索时，直接找到key所在的节点即可取出数据；在根据辅助索引查找时，则需要先取出主键的值，再走一遍主索引。</strong> <strong>因此，在设计表的时候，不建议使用过长的字段作为主键，也不建议使用非单调的字段作为主键，这样会造成主索引频繁分裂。</strong></li>
</ul>
<h2 id="Innodb与Myisam引擎的区别与应用场景"><a href="#Innodb与Myisam引擎的区别与应用场景" class="headerlink" title="Innodb与Myisam引擎的区别与应用场景"></a><a href="https://www.cnblogs.com/changna1314/p/6878900.html" target="_blank" rel="noopener">Innodb与Myisam引擎的区别与应用场景</a></h2><p>\1. 区别：</p>
<p>（1）事务处理：</p>
<p>MyISAM是非事务安全型的，而InnoDB是事务安全型的（支持事务处理等高级处理）；</p>
<p>（2）锁机制不同：</p>
<p>MyISAM是表级锁，而InnoDB是行级锁；</p>
<p>（3）select ,update ,insert ,delete 操作：</p>
<p>MyISAM：如果执行大量的SELECT，MyISAM是更好的选择</p>
<p>InnoDB：如果你的数据执行大量的INSERT或UPDATE，出于性能方面的考虑，应该使用InnoDB表</p>
<p>（4）查询表的行数不同：</p>
<p>MyISAM：select count(<em>) from table,MyISAM只要简单的读出保存好的行数，注意的是，当count(</em>)语句包含 where条件时，两种表的操作是一样的</p>
<p>InnoDB ： InnoDB 中不保存表的具体行数，也就是说，执行select count(*) from table时，InnoDB要扫描一遍整个表来计算有多少行</p>
<p>（5）外键支持：</p>
<p>mysiam表不支持外键，而InnoDB支持</p>
<ol>
<li>为什么MyISAM会比Innodb 的查询速度快。</li>
</ol>
<p>INNODB在做SELECT的时候，要维护的东西比MYISAM引擎多很多；<br>1）数据块，INNODB要缓存，MYISAM只缓存索引块， 这中间还有换进换出的减少；<br>2）innodb寻址要映射到块，再到行，MYISAM 记录的直接是文件的OFFSET，定位比INNODB要快<br>3）INNODB还需要维护MVCC一致；虽然你的场景没有，但他还是需要去检查和维护</p>
<p>MVCC ( Multi-Version Concurrency Control )多版本并发控制</p>
<p>\3. 应用场景</p>
<p>MyISAM适合：(1)做很多count 的计算；(2)插入不频繁，查询非常频繁；(3)没有事务。</p>
<p>InnoDB适合：(1)可靠性要求比较高，或者要求事务；(2)表更新和查询都相当的频繁，并且行锁定的机会比较大的情况。</p>
<p>串行化（<em>SERIALIZABLE</em>）：所有事务都一个接一个地串行执行，这样可以避免幻读（<em>phantom reads</em>）。对于基于锁来实现并发控制的数据库来说，串行化要求在执行范围查询（如选取年龄在<em>10</em>到<em>30</em>之间的用户）的时候，需要获取范围锁（<em>range lock</em>）。如果不是基于锁实现并发控制的数据库，则检查到有违反串行操作的事务时，需要滚回该事务。</p>
<p>可重复读（<em>REPEATABLE READ</em>）：所有被<em>Select</em>获取的数据都不能被修改，这样就可以避免一个事务前后读取数据不一致的情况。但是却没有办法控制幻读，因为这个时候其他事务不能更改所选的数据，但是可以增加数据，因为前一个事务没有范围锁。</p>
<p>读已提交（<em>READ COMMITED</em>）：被读取的数据可以被其他事务修改。这样就可能导致不可重复读。也就是说，事务的读取数据的时候获取读锁，但是读完之后立即释放（不需要等到事务结束），而写锁则是事务提交之后才释放。释放读锁之后，就可能被其他事物修改数据。该等级也是<em>SQL Server</em>默认的隔离等级。</p>
<p>读未提交（<em>READ UNCOMMITED</em>）：这是最低的隔离等级，允许其他事务看到没有提交的数据。这种等级会导致脏读（<em>Dirty Read</em>）。</p>
<h1 id="索引-1"><a href="#索引-1" class="headerlink" title="索引"></a>索引</h1><h3 id="四、缺点"><a href="#四、缺点" class="headerlink" title="四、缺点"></a>四、缺点</h3><p>1.虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行insert、update和delete。因为更新表时，不仅要保存数据，还要保存一下索引文件。</p>
<p>2.建立索引会占用磁盘空间的索引文件。一般情况这个问题不太严重，但如果你在一个大表上创建了多种组合索引，索引文件的会增长很快。 索引只是提高效率的一个因素，如果有大数据量的表，就需要花时间研究建立最优秀的索引，或优化查询语句。</p>
<h3 id="五、注意事项"><a href="#五、注意事项" class="headerlink" title="五、注意事项"></a>五、注意事项</h3><p>使用索引时，有以下一些技巧和注意事项：</p>
<p>1.索引不会包含有null值的列 只要列中包含有null值都将不会被包含在索引中，复合索引中只要有一列含有null值，那么这一列对于此复合索引就是无效的。所以我们在数据库设计时不要让字段的默认值为null。</p>
<p>2.使用短索引 对串列进行索引，如果可能应该指定一个前缀长度。例如，如果有一个char(255)的列，如果在前10个或20个字符内，多数值是惟一的，那么就不要对整个列进行索引。短索引不仅可以提高查询速度而且可以节省磁盘空间和I/O操作。</p>
<p>3.索引列排序 查询只使用一个索引，因此如果where子句中已经使用了索引的话，那么order by中的列是不会使用索引的。因此数据库默认排序可以符合要求的情况下不要使用排序操作；尽量不要包含多个列的排序，如果需要最好给这些列创建复合索引。</p>
<p>4.like语句操作 一般情况下不推荐使用like操作，如果非使用不可，如何使用也是一个问题。like “%aaa%” 不会使用索引而like “aaa%”可以使用索引。 5.不要在列上进行运算 这将导致索引失效而进行全表扫描，例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM table_name WHERE YEAR(column_name)&lt;2017;</span><br></pre></td></tr></table></figure>

<p>6.不使用not in和&lt;&gt;操作</p>
<h1 id="Explain-详解"><a href="#Explain-详解" class="headerlink" title="Explain 详解"></a>Explain 详解</h1><p>在日常工作中，我们会有时会开慢查询去记录一些执行时间比较久的SQL语句，找出这些SQL语句并不意味着完事了，些时我们常常用到explain这个命令来查看一个这些SQL语句的执行计划，查看该SQL语句有没有使用上了索引，有没有做全表扫描，这都可以通过explain命令来查看。所以我们深入了解MySQL的基于开销的优化器，还可以获得很多可能被优化器考虑到的访问策略的细节，以及当运行SQL语句时哪种策略预计会被优化器采用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 实际SQL，查找用户名为Jefabc的员工</span><br><span class="line">select * from emp where name &#x3D; &#39;Jefabc&#39;;</span><br><span class="line">-- 查看SQL是否使用索引，前面加上explain即可</span><br><span class="line">explain select * from emp where name &#x3D; &#39;Jefabc&#39;;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/512541/201808/512541-20180803142201303-545775900.png" alt="img"></p>
<p>expain出来的信息有10列，分别是id、select_type、table、type、possible_keys、key、key_len、ref、rows、Extra</p>
<p><strong>概要描述：</strong><br>id:选择标识符<br>select_type:表示查询的类型。<br>table:输出结果集的表<br>partitions:匹配的分区<br>type:表示表的连接类型<br>possible_keys:表示查询时，可能使用的索引<br>key:表示实际使用的索引<br>key_len:索引字段的长度<br>ref:列与索引的比较<br>rows:扫描出的行数(估算的行数)<br>filtered:按表条件过滤的行百分比<br>Extra:执行情况的描述和说明</p>
<p><strong>下面对这些字段出现的可能进行解释：</strong></p>
<p>一、 <strong>id</strong></p>
<p>SELECT识别符。这是SELECT的查询序列号</p>
<p><strong>我的理解是SQL执行的顺序的标识，SQL从大到小的执行</strong></p>
<p>\1. id相同时，执行顺序由上至下</p>
<p>\2. 如果是子查询，id的序号会递增，id值越大优先级越高，越先被执行</p>
<p>\3. id如果相同，可以认为是一组，从上往下顺序执行；在所有组中，id值越大，优先级越高，越先执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查看在研发部并且名字以Jef开头的员工，经典查询</span><br><span class="line">explain select e.no, e.name from emp e left join dept d on e.dept_no &#x3D; d.no where e.name like &#39;Jef%&#39; and d.name &#x3D; &#39;研发部&#39;;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/512541/201808/512541-20180803143413064-173136748.png" alt="img"></p>
<p><strong>二、select_type</strong></p>
<p>   <strong><em>\</em>示查询中每个select子句的类型**</strong></p>
<p>(1) SIMPLE(简单SELECT，不使用UNION或子查询等)</p>
<p>(2) PRIMARY(子查询中最外层查询，查询中若包含任何复杂的子部分，最外层的select被标记为PRIMARY)</p>
<p>(3) UNION(UNION中的第二个或后面的SELECT语句)</p>
<p>(4) DEPENDENT UNION(UNION中的第二个或后面的SELECT语句，取决于外面的查询)</p>
<p>(5) UNION RESULT(UNION的结果，union语句中第二个select开始后面所有select)</p>
<p>(6) SUBQUERY(子查询中的第一个SELECT，结果不依赖于外部查询)</p>
<p>(7) DEPENDENT SUBQUERY(子查询中的第一个SELECT，依赖于外部查询)</p>
<p>(8) DERIVED(派生表的SELECT, FROM子句的子查询)</p>
<p>(9) UNCACHEABLE SUBQUERY(一个子查询的结果不能被缓存，必须重新评估外链接的第一行)</p>
<p><strong>三、table</strong></p>
<p>显示这一步所访问数据库中表名称（显示这一行的数据是关于哪张表的），有时不是真实的表名字，可能是简称，例如上面的e，d，也可能是第几步执行的结果的简称</p>
<p><strong>四、type</strong></p>
<p>对表访问方式，表示MySQL在表中找到所需行的方式，又称“访问类型”。</p>
<p>常用的类型有： <strong>ALL、index、range、 ref、eq_ref、const、system、**</strong>NULL（从左到右，性能从差到好）**</p>
<p>ALL：Full Table Scan， MySQL将遍历全表以找到匹配的行</p>
<p>index: Full Index Scan，index与ALL区别为index类型只遍历索引树</p>
<p>range:只检索给定范围的行，使用一个索引来选择行</p>
<p>ref: 表示上述表的连接匹配条件，即哪些列或常量被用于查找索引列上的值</p>
<p>eq_ref: 类似ref，区别就在使用的索引是唯一索引，对于每个索引键值，表中只有一条记录匹配，简单来说，就是多表连接中使用primary key或者 unique key作为关联条件</p>
<p>const、system: 当MySQL对查询某部分进行优化，并转换为一个常量时，使用这些类型访问。如将主键置于where列表中，MySQL就能将该查询转换为一个常量，system是const类型的特例，当查询的表只有一行的情况下，使用system</p>
<p>NULL: MySQL在优化过程中分解语句，执行时甚至不用访问表或索引，例如从一个索引列里选取最小值可以通过单独索引查找完成。</p>
<p><strong>五、possible_keys</strong></p>
<p><strong>指出MySQL能使用哪个索引在表中找到记录，查询涉及到的字段上若存在索引，则该索引将被列出，但不一定被查询使用（该查询可以利用的索引，如果没有任何索引显示 null）</strong></p>
<p>该列完全独立于EXPLAIN输出所示的表的次序。这意味着在possible_keys中的某些键实际上不能按生成的表次序使用。<br>如果该列是NULL，则没有相关的索引。在这种情况下，可以通过检查WHERE子句看是否它引用某些列或适合索引的列来提高你的查询性能。如果是这样，创造一个适当的索引并且再次用EXPLAIN检查查询</p>
<p><strong>六、Key</strong></p>
<p><strong>key列显示MySQL实际决定使用的键（索引），必然包含在possible_keys中</strong></p>
<p>如果没有选择索引，键是NULL。要想强制MySQL使用或忽视possible_keys列中的索引，在查询中使用FORCE INDEX、USE INDEX或者IGNORE INDEX。</p>
<p><strong>七、key_len</strong></p>
<p><strong>表示索引中使用的字节数，可通过该列计算查询中使用的索引的长度（key_len显示的值为索引字段的最大可能长度，并非实际使用长度，即key_len是根据表定义计算而得，不是通过表内检索出的）</strong></p>
<p>不损失精确性的情况下，长度越短越好 </p>
<p><strong>八、ref</strong></p>
<p><strong>列与索引的比较，表示上述表的连接匹配条件，即哪些列或常量被用于查找索引列上的值</strong></p>
<p><strong>九、rows</strong></p>
<p> <strong>估算出结果集行数，表示MySQL根据表统计信息及索引选用情况，估算的找到所需的记录所需要读取的行数</strong></p>
<p><strong>十、Extra</strong></p>
<p><strong>该列包含MySQL解决查询的详细信息,有以下几种情况：</strong></p>
<p>Using where:不用读取表中所有信息，仅通过索引就可以获取所需数据，这发生在对表的全部的请求列都是同一个索引的部分的时候，表示mysql服务器将在存储引擎检索行后再进行过滤</p>
<p>Using temporary：表示MySQL需要使用临时表来存储结果集，常见于排序和分组查询，常见 group by ; order by</p>
<p>Using filesort：当Query中包含 order by 操作，而且无法利用索引完成的排序操作称为“文件排序”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 测试Extra的filesort</span><br><span class="line">explain select * from emp order by name;</span><br></pre></td></tr></table></figure>

<p>Using join buffer：改值强调了在获取连接条件时没有使用索引，并且需要连接缓冲区来存储中间结果。如果出现了这个值，那应该注意，根据查询的具体情况可能需要添加索引来改进能。</p>
<p>Impossible where：这个值强调了where语句会导致没有符合条件的行（通过收集统计信息不可能存在结果）。</p>
<p>Select tables optimized away：这个值意味着仅通过使用索引，优化器可能仅从聚合函数结果中返回一行</p>
<p>No tables used：Query语句中使用from dual 或不含任何from子句</p>
<h1 id="数据库隔离级别与锁"><a href="#数据库隔离级别与锁" class="headerlink" title="数据库隔离级别与锁"></a>数据库隔离级别与锁</h1><h3 id="事务的四种隔离级别"><a href="#事务的四种隔离级别" class="headerlink" title="事务的四种隔离级别"></a>事务的四种隔离级别</h3><p>在数据库操作中，为了有效保证并发读取数据的正确性，提出的事务隔离级别。我们的数据库锁，也是为了构建这些隔离级别存在的。</p>
<table>
<thead>
<tr>
<th align="left">隔离级别</th>
<th align="left">脏读（Dirty Read）</th>
<th align="left">不可重复读（NonRepeatable Read）</th>
<th align="left">幻读（Phantom Read）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">未提交读（Read uncommitted）</td>
<td align="left">可能</td>
<td align="left">可能</td>
<td align="left">可能</td>
</tr>
<tr>
<td align="left">已提交读（Read committed）</td>
<td align="left">不可能</td>
<td align="left">可能</td>
<td align="left">可能</td>
</tr>
<tr>
<td align="left">可重复读（Repeatable read）</td>
<td align="left">不可能</td>
<td align="left">不可能</td>
<td align="left">可能</td>
</tr>
<tr>
<td align="left">可串行化（Serializable ）</td>
<td align="left">不可能</td>
<td align="left">不可能</td>
<td align="left">不可能</td>
</tr>
</tbody></table>
<ul>
<li>未提交读(Read Uncommitted)：允许脏读，也就是可能读取到其他会话中未提交事务修改的数据</li>
<li>提交读(Read Committed)：只能读取到已经提交的数据。Oracle等多数数据库默认都是该级别 (不重复读)</li>
<li>可重复读(Repeated Read)：可重复读。在同一个事务内的查询都是事务开始时刻一致的，InnoDB默认级别。在SQL标准中，该隔离级别消除了不可重复读，但是还存在幻象读</li>
<li>串行读(Serializable)：完全串行化的读，每次读都需要获得表级共享锁，读写相互都会阻塞</li>
</ul>
<p>Read Uncommitted这种级别，数据库一般都不会用，而且任何操作都不会加锁，这里就不讨论了。</p>
<h3 id="Read-Committed（读取提交内容）"><a href="#Read-Committed（读取提交内容）" class="headerlink" title="Read Committed（读取提交内容）"></a>Read Committed（读取提交内容）</h3><p>在RC级别中，数据的读取都是不加锁的，但是数据的写入、修改和删除是需要加锁的。效果如下</p>
<table>
<thead>
<tr>
<th align="left">事务A</th>
<th align="left">事务B</th>
</tr>
</thead>
<tbody><tr>
<td align="left">begin;</td>
<td align="left">begin;</td>
</tr>
<tr>
<td align="left">update class_teacher set class_name=‘初三二班’ where teacher_id=1;</td>
<td align="left">update class_teacher set class_name=‘初三三班’ where teacher_id=1;</td>
</tr>
<tr>
<td align="left">commit;</td>
<td align="left"></td>
</tr>
</tbody></table>
<p>为了防止并发过程中的修改冲突，事务A中MySQL给teacher_id=1的数据行加锁，并一直不commit（释放锁），那么事务B也就一直拿不到该行锁，wait直到超时。</p>
<h3 id="Repeatable-Read（可重读）"><a href="#Repeatable-Read（可重读）" class="headerlink" title="Repeatable Read（可重读）"></a>Repeatable Read（可重读）</h3><p>很多人容易搞混不可重复读和幻读，确实这两者有些相似。但不可重复读重点在于update和delete，而幻读的重点在于insert。</p>
<p>如果使用锁机制来实现这两种隔离级别，在可重复读中，该sql第一次读取到数据后，就将这些数据加锁，其它事务无法修改这些数据，就可以实现可重复读了。但这种方法却无法锁住insert的数据，所以当事务A先前读取了数据，或者修改了全部数据，事务B还是可以insert数据提交，这时事务A就会发现莫名其妙多了一条之前没有的数据，这就是幻读，不能通过行锁来避免。需要Serializable隔离级别 ，读用读锁，写用写锁，读锁和写锁互斥，这么做可以有效的避免幻读、不可重复读、脏读等问题，但会极大的降低数据库的并发能力。</p>
<p>所以说不可重复读和幻读最大的区别，就在于如何通过锁机制来解决他们产生的问题。</p>
<p>上文说的，是使用悲观锁机制来处理这两种问题，但是MySQL、ORACLE、PostgreSQL等成熟的数据库，出于性能考虑，都是使用了以乐观锁为理论基础的MVCC（多版本并发控制）来避免这两种问题。</p>
<h3 id="悲观锁和乐观锁"><a href="#悲观锁和乐观锁" class="headerlink" title="悲观锁和乐观锁"></a>悲观锁和乐观锁</h3><ul>
<li>悲观锁</li>
</ul>
<p>正如其名，它指的是对数据被外界（包括本系统当前的其他事务，以及来自外部系统的事务处理）修改持保守态度，因此，在整个数据处理过程中，将数据处于锁定状态。悲观锁的实现，往往依靠数据库提供的锁机制（也只有数据库层提供的锁机制才能真正保证数据访问的排他性，否则，即使在本系统中实现了加锁机制，也无法保证外部系统不会修改数据）。</p>
<p>在悲观锁的情况下，为了保证事务的隔离性，就需要一致性锁定读。读取数据时给加锁，其它事务无法修改这些数据。修改删除数据时也要加锁，其它事务无法读取这些数据。</p>
<ul>
<li>乐观锁</li>
</ul>
<p>相对悲观锁而言，乐观锁机制采取了更加宽松的加锁机制。悲观锁大多数情况下依靠数据库的锁机制实现，以保证操作最大程度的独占性。但随之而来的就是数据库性能的大量开销，特别是对长事务而言，这样的开销往往无法承受。</p>
<p>而乐观锁机制在一定程度上解决了这个问题。乐观锁，大多是基于数据版本（ Version ）记录机制实现。何谓数据版本？即为数据增加一个版本标识，在基于数据库表的版本解决方案中，一般是通过为数据库表增加一个 “version” 字段来实现。读取出数据时，将此版本号一同读出，之后更新时，对此版本号加一。此时，将提交数据的版本数据与数据库表对应记录的当前版本信息进行比对，如果提交的数据版本号大于数据库表当前版本号，则予以更新，否则认为是过期数据。</p>
<p>要说明的是，MVCC的实现没有固定的规范，每个数据库都会有不同的实现方式，这里讨论的是InnoDB的MVCC。</p>
<h3 id="MVCC在MySQL的InnoDB中的实现"><a href="#MVCC在MySQL的InnoDB中的实现" class="headerlink" title="MVCC在MySQL的InnoDB中的实现"></a>MVCC在MySQL的InnoDB中的实现</h3><p>在InnoDB中，会在每行数据后添加两个额外的隐藏的值来实现MVCC，这两个值一个记录这行数据何时被创建，另外一个记录这行数据何时过期（或者被删除）。 在实际操作中，存储的并不是时间，而是事务的版本号，每开启一个新事务，事务的版本号就会递增。 在可重读Repeatable reads事务隔离级别下：</p>
<ul>
<li>SELECT时，读取创建版本号&lt;=当前事务版本号，删除版本号为空或&gt;当前事务版本号。</li>
<li>INSERT时，保存当前事务版本号为行的创建版本号</li>
<li>DELETE时，保存当前事务版本号为行的删除版本号</li>
<li>UPDATE时，插入一条新纪录，保存当前事务版本号为行创建版本号，同时保存当前事务版本号到原来删除的行</li>
</ul>
<p>通过MVCC，虽然每行记录都需要额外的存储空间，更多的行检查工作以及一些额外的维护工作，但可以减少锁的使用，大多数读操作都不用加锁，读数据操作很简单，性能很好，并且也能保证只会读取到符合标准的行，也只锁住必要行。</p>
<p><a href="https://tech.meituan.com/2014/08/20/innodb-lock.html" target="_blank" rel="noopener">美团</a></p>
<p><a href="https://tech.meituan.com/2014/08/20/innodb-lock.html" target="_blank" rel="noopener">https://tech.meituan.com/2014/08/20/innodb-lock.html</a></p>

          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/05/Java%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/05/Java%E5%9F%BA%E7%A1%80/" itemprop="url">Java基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-05T20:30:01+08:00">
                2020-04-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  1.8k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###Object有哪些公用方法？</p>
<p>1．clone方法</p>
<p>保护方法，实现对象的浅复制，只有实现了Cloneable接口才可以调用该方法，否则抛出CloneNotSupportedException异常。</p>
<p>主要是JAVA里除了8种基本类型传参数是值传递，其他的类对象传参数都是引用传递，我们有时候不希望在方法里讲参数改变，这是就需要在类中复写clone方法。</p>
<p>2．getClass方法</p>
<p>final方法，获得运行时类型。</p>
<p>3．toString方法</p>
<p>该方法用得比较多，一般子类都有覆盖。</p>
<p>4．finalize方法</p>
<p>该方法用于释放资源。因为无法确定该方法什么时候被调用，很少使用。</p>
<p>5．equals方法</p>
<p>该方法是非常重要的一个方法。一般equals和==是不一样的，但是在Object中两者是一样的。子类一般都要重写这个方法。</p>
<p>6．hashCode方法</p>
<p>该方法用于哈希查找，可以减少在查找中使用equals的次数，重写了equals方法一般都要重写hashCode方法。这个方法在一些具有哈希功能的Collection中用到。</p>
<p>一般必须满足obj1.equals(obj2)==true。可以推出obj1.hashCode()==obj2.hashCode()，但是hashCode相等不一定就满足equals。不过为了提高效率，应该尽量使上面两个条件接近等价。</p>
<p>如果不重写hashCode(),在HashSet中添加两个equals的对象，会将两个对象都加入进去。</p>
<p>7．wait方法</p>
<p>wait方法就是使当前线程等待该对象的锁，当前线程必须是该对象的拥有者，也就是具有该对象的锁。wait()方法一直等待，直到获得锁或者被中断。wait(long timeout)设定一个超时间隔，如果在规定时间内没有获得锁就返回。</p>
<p>调用该方法后当前线程进入睡眠状态，直到以下事件发生。</p>
<p>（1）其他线程调用了该对象的notify方法。</p>
<p>（2）其他线程调用了该对象的notifyAll方法。</p>
<p>（3）其他线程调用了interrupt中断该线程。</p>
<p>（4）时间间隔到了。</p>
<p>此时该线程就可以被调度了，如果是被中断的话就抛出一个InterruptedException异常。</p>
<p>8．notify方法</p>
<p>该方法唤醒在该对象上等待的某个线程。</p>
<p>9．notifyAll方法</p>
<p>该方法唤醒在该对象上等待的所有线程。</p>
<h1 id="Java-基本数据类型"><a href="#Java-基本数据类型" class="headerlink" title="Java 基本数据类型"></a>Java 基本数据类型</h1><p>变量就是申请内存来存储值。也就是说，当创建变量的时候，需要在内存中申请空间。</p>
<p>内存管理系统根据变量的类型为变量分配存储空间，分配的空间只能用来储存该类型数据。</p>
<p><a href="https://camo.githubusercontent.com/7f5199036de793bf6f2f530c4105d3a9138b468b/68747470733a2f2f7777772e72756e6f6f622e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031332f31322f6d656d6f7279706963312e6a7067" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/7f5199036de793bf6f2f530c4105d3a9138b468b/68747470733a2f2f7777772e72756e6f6f622e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031332f31322f6d656d6f7279706963312e6a7067" alt="img"></a></p>
<p>因此，通过定义不同类型的变量，可以在内存中储存整数、小数或者字符。</p>
<h2 id="Java-的两大数据类型"><a href="#Java-的两大数据类型" class="headerlink" title="Java 的两大数据类型:"></a>Java 的两大数据类型:</h2><ul>
<li>内置数据类型</li>
<li>引用数据类型</li>
</ul>
<hr>
<h3 id="内置数据类型"><a href="#内置数据类型" class="headerlink" title="内置数据类型"></a>内置数据类型</h3><p>Java语言提供了八种基本类型。六种数字类型（四个整数型，两个浮点型），一种字符类型，还有一种布尔型。</p>
<p><strong>byte：</strong></p>
<ul>
<li>byte 数据类型是8位、有符号的，以二进制补码表示的整数；</li>
<li>最小值是 -128（-2^7）；</li>
<li>最大值是 127（2^7-1）；</li>
<li>默认值是 0；</li>
<li>byte 类型用在大型数组中节约空间，主要代替整数，因为 byte 变量占用的空间只有 int 类型的四分之一；</li>
<li>例子：byte a = 100，byte b = -50。</li>
</ul>
<p><strong>short：</strong></p>
<ul>
<li>short 数据类型是 16 位、有符号的以二进制补码表示的整数</li>
<li>最小值是 -32768（-2^15）；</li>
<li>最大值是 32767（2^15 - 1）；</li>
<li>Short 数据类型也可以像 byte 那样节省空间。一个short变量是int型变量所占空间的二分之一；</li>
<li>默认值是 0；</li>
<li>例子：short s = 1000，short r = -20000。</li>
</ul>
<p><strong>int：</strong></p>
<ul>
<li>int 数据类型是32位、有符号的以二进制补码表示的整数；</li>
<li>最小值是 -2,147,483,648（-2^31）；</li>
<li>最大值是 2,147,483,647（2^31 - 1）；</li>
<li>一般地整型变量默认为 int 类型；</li>
<li>默认值是 0 ；</li>
<li>例子：int a = 100000, int b = -200000。</li>
</ul>
<p><strong>long：</strong></p>
<ul>
<li>long 数据类型是 64 位、有符号的以二进制补码表示的整数；</li>
<li>最小值是 -9,223,372,036,854,775,808（-2^63）；</li>
<li>最大值是 9,223,372,036,854,775,807（2^63 -1）；</li>
<li>这种类型主要使用在需要比较大整数的系统上；</li>
<li>默认值是 0L；</li>
<li>例子： long a = 100000L，Long b = -200000L。 “L”理论上不分大小写，但是若写成”l”容易与数字”1”混淆，不容易分辩。所以最好大写。</li>
</ul>
<p><strong>float：</strong></p>
<ul>
<li>float 数据类型是单精度、32位、符合IEEE 754标准的浮点数；</li>
<li>float 在储存大型浮点数组的时候可节省内存空间；</li>
<li>默认值是 0.0f；</li>
<li>浮点数不能用来表示精确的值，如货币；</li>
<li>例子：float f1 = 234.5f。</li>
</ul>
<p><strong>double：</strong></p>
<ul>
<li>double 数据类型是双精度、64 位、符合IEEE 754标准的浮点数；</li>
<li>浮点数的默认类型为double类型；</li>
<li>double类型同样不能表示精确的值，如货币；</li>
<li>默认值是 0.0d；</li>
<li>例子：double d1 = 123.4。</li>
</ul>
<p><strong>boolean：</strong></p>
<ul>
<li>boolean数据类型表示一位的信息；</li>
<li>只有两个取值：true 和 false；</li>
<li>这种类型只作为一种标志来记录 true/false 情况；</li>
<li>默认值是 false；</li>
<li>例子：boolean one = true。</li>
</ul>
<p><strong>char：</strong></p>
<ul>
<li>char类型是一个单一的 16 位 Unicode 字符；</li>
<li>最小值是 \u0000（即为0）；</li>
<li>最大值是 \uffff（即为65,535）；</li>
<li>char 数据类型可以储存任何字符；</li>
<li>例子：char letter = ‘A’;。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;8位</span><br><span class="line">byte bx &#x3D; Byte.MAX_VALUE;</span><br><span class="line">byte bn &#x3D; Byte.MIN_VALUE;</span><br><span class="line">&#x2F;&#x2F;16位</span><br><span class="line">short sx &#x3D; Short.MAX_VALUE;</span><br><span class="line">short sn &#x3D; Short.MIN_VALUE;</span><br><span class="line">&#x2F;&#x2F;32位</span><br><span class="line">int ix &#x3D; Integer.MAX_VALUE;</span><br><span class="line">int in &#x3D; Integer.MIN_VALUE;</span><br><span class="line">&#x2F;&#x2F;64位</span><br><span class="line">long lx &#x3D; Long.MAX_VALUE;</span><br><span class="line">long ln &#x3D; Long.MIN_VALUE;</span><br><span class="line">&#x2F;&#x2F;32位</span><br><span class="line">float fx &#x3D; Float.MAX_VALUE;</span><br><span class="line">float fn &#x3D; Float.MIN_VALUE;</span><br><span class="line">&#x2F;&#x2F;64位</span><br><span class="line">double dx &#x3D; Double.MAX_VALUE;</span><br><span class="line">double dn &#x3D; Double.MIN_VALUE;</span><br><span class="line">&#x2F;&#x2F;16位</span><br><span class="line">char cx &#x3D; Character.MAX_VALUE;</span><br><span class="line">char cn &#x3D; Character.MIN_VALUE;</span><br><span class="line">&#x2F;&#x2F;1位</span><br><span class="line">boolean bt &#x3D; Boolean.TRUE;</span><br><span class="line">boolean bf &#x3D; Boolean.FALSE;</span><br><span class="line">&#96;127&#96;</span><br><span class="line">&#96;-128&#96;</span><br><span class="line">&#96;32767&#96;</span><br><span class="line">&#96;-32768&#96;</span><br><span class="line">&#96;2147483647&#96;</span><br><span class="line">&#96;-2147483648&#96;</span><br><span class="line">&#96;9223372036854775807&#96;</span><br><span class="line">&#96;-9223372036854775808&#96;</span><br><span class="line">&#96;3.4028235E38&#96;</span><br><span class="line">&#96;1.4E-45&#96;</span><br><span class="line">&#96;1.7976931348623157E308&#96;</span><br><span class="line">&#96;4.9E-324&#96;</span><br><span class="line">&#96;�&#96;</span><br><span class="line"></span><br><span class="line">&#96;true&#96;</span><br><span class="line">&#96;false&#96;</span><br></pre></td></tr></table></figure>

<h3 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h3><ul>
<li>在Java中，引用类型的变量非常类似于C/C++的指针。引用类型指向一个对象，指向对象的变量是引用变量。这些变量在声明时被指定为一个特定的类型，比如 Employee、Puppy 等。变量一旦声明后，类型就不能被改变了。</li>
<li>对象、数组都是引用数据类型。</li>
<li>所有引用类型的默认值都是null。</li>
<li>一个引用变量可以用来引用任何与之兼容的类型。</li>
<li>例子：Site site = new Site(“Runoob”)。</li>
</ul>
<h3 id="Java-常量"><a href="#Java-常量" class="headerlink" title="Java 常量"></a>Java 常量</h3><p>常量在程序运行时是不能被修改的。</p>
<p>在 Java 中使用 final 关键字来修饰常量，声明方式和变量类似：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">final double PI &#x3D; 3.1415927;</span><br></pre></td></tr></table></figure>

<p>虽然常量名也可以用小写，但为了便于识别，通常使用大写字母表示常量。</p>
<p>字面量可以赋给任何内置类型的变量。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">byte a &#x3D; 68;</span><br><span class="line">char a &#x3D; &#39;A&#39;</span><br></pre></td></tr></table></figure>



<h2 id="自动拆箱和装箱"><a href="#自动拆箱和装箱" class="headerlink" title="自动拆箱和装箱"></a>自动拆箱和装箱</h2><p>自动装箱与自动拆箱机制，方便基本类型与包装类型的相互转换操作</p>

          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url">计算机网络</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-10T23:20:53+08:00">
                2020-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  211
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/2020/03/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E4%B8%83%E5%B1%82%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="七层体系结构图"></p>
<h1 id="从输入URL到页面加载发生了什么"><a href="#从输入URL到页面加载发生了什么" class="headerlink" title="从输入URL到页面加载发生了什么"></a>从输入URL到页面加载发生了什么</h1><p><a href="https://segmentfault.com/a/1190000006879700" target="_blank" rel="noopener">https://segmentfault.com/a/1190000006879700</a></p>
<h1 id="TCP三次握手四次挥手"><a href="#TCP三次握手四次挥手" class="headerlink" title="TCP三次握手四次挥手"></a>TCP三次握手四次挥手</h1><p><img src="/2020/03/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20200412200113765.png" alt="image-20200412200113765"></p>
<p><img src="/2020/03/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20200412200541794.png" alt="image-20200412200541794"></p>
<p><a href="https://www.bilibili.com/video/BV1h7411A7tG?from=search&amp;seid=2537784259408108642" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1h7411A7tG?from=search&amp;seid=2537784259408108642</a></p>
<h1 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h1><ol>
<li>客户端生成一个随机数，然后将随机数、版本协议号、支持的加密方法传给服务器</li>
<li>服务器确认加密方法，生成一个随机数，还有将数字证书传给客户端</li>
<li>客户端确认数字证书有效，生成一个新的随机数，并用数字证书里的公钥来加密这个随机数，发给服务器</li>
<li>服务器用自己的私钥来获取客户端发来的随机数</li>
<li>服务器和客户端根据约定的加密方法，使用之前生成的三个随机数，生成对话秘钥，来加密接下来的整个对话过程。</li>
</ol>

          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/07/Linux%E5%A4%8D%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/07/Linux%E5%A4%8D%E4%B9%A0/" itemprop="url">Linux复习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-07T20:53:46+08:00">
                2020-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  8.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  30
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h2><h4 id="1、简述-Linux-系统的应用领域。"><a href="#1、简述-Linux-系统的应用领域。" class="headerlink" title="1、简述 Linux 系统的应用领域。"></a>1、简述 Linux 系统的应用领域。</h4><ul>
<li>Linux服务器</li>
<li>嵌入式Linux系统</li>
<li>软件开发平台</li>
<li>桌面应用</li>
</ul>
<h4 id="2、简述-Linux-系统的特点。"><a href="#2、简述-Linux-系统的特点。" class="headerlink" title="2、简述 Linux 系统的特点。"></a>2、简述 Linux 系统的特点。</h4><ul>
<li>开放性</li>
<li>多用户</li>
<li>多任务</li>
<li>良好的用户界面</li>
<li>设备独立性</li>
<li>丰富的网络功能</li>
<li>可靠的系统安全</li>
<li>良好的可移植性</li>
</ul>
<h4 id="3、简述-Linux-系统的组成。"><a href="#3、简述-Linux-系统的组成。" class="headerlink" title="3、简述 Linux 系统的组成。"></a>3、简述 Linux 系统的组成。</h4><ol>
<li>内核</li>
<li>Shell</li>
<li>文件系统</li>
<li>应用程序</li>
</ol>
<h4 id="4、简述主流的-Linux-系统发行版本。"><a href="#4、简述主流的-Linux-系统发行版本。" class="headerlink" title="4、简述主流的 Linux 系统发行版本。"></a>4、简述主流的 Linux 系统发行版本。</h4><ul>
<li>Red Hat</li>
<li>SUSE</li>
<li>Oracle</li>
<li>CentOS</li>
<li>Ubuntu</li>
<li>Debian</li>
<li>Mandriva</li>
<li>Gentoo</li>
<li>Slackware</li>
<li>Fedora</li>
</ul>
<h4 id="5、简述-RHEL-7-系统的新特性。"><a href="#5、简述-RHEL-7-系统的新特性。" class="headerlink" title="5、简述 RHEL 7 系统的新特性。"></a>5、简述 RHEL 7 系统的新特性。</h4><ul>
<li>包含 Kernel 3.10 版本，支持 swap 内存压缩可保证显著减少 I/O 并提高性能，采用 NUMA（统一内存访问）的调度和内存分配，支持APIC（高级程序中断控制器）虚拟化， 全面的 DynTick 支持，将内核模块列入黑名单，kpatch 动态内核补丁等。 </li>
<li>在存储和文件系统方面，RHEL 7 使用 LIO 内核目标子系统，支持快速设备为较慢的块设备提供缓存，引进了 LVM 缓存，将 xfs作为默认的文件系统。</li>
<li>引进网络分组技术作为链路聚集的捆绑备用方法，对 NetworkManager 进行大量改进，提供动态防火墙守护进程 firewalld，加入 DNSSEC 域名系统安全扩展，附带 OpenLMI 用来管理 Linux 系统提供常用的基础设施，引进 了可信网络连接功能等。 </li>
<li>对 KVM（基于内核的虚拟化）提供了大量改进，诸如使用 virtio-blk-data-plane 提高快 I/O 性能 (技术预览)，支持 PCI 桥接，QEMU 沙箱，多队列 NIC，USB 3.0 支持等。 </li>
<li>引入 Linux 容器 Docker。 </li>
<li>编译工具链方面，RHEL 7 包含 GCC 4.8.x、glibc 2.17、GDB 7.6.1。</li>
<li>包含 Performance Co-Pilot、SystemTap 2.4、Valgrind 3.9.0 等性能工具。 </li>
<li>包含 Ruby 2.0.0、Python 2.7.5、Java 7 等编程语言。 </li>
<li>包含 Apache 2.4、MariaDB 5.5、PostgreSQL 9.2 等软件包。 </li>
<li>在系统和服务方面，RHEL 7 使用 systemd 替换了 SysV。</li>
<li>引入 Pacemaker 集群管理器，同时使用 keepalived 和 HAProxy 替换了负载均衡程序 Piranha。</li>
<li>对安装程序 Anaconda 进行了重新设计和增强，并使用 GRUB 2 引导装载程序。</li>
</ul>
<h2 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h2><h4 id="1、简述安装-Linux-系统的硬件要求。"><a href="#1、简述安装-Linux-系统的硬件要求。" class="headerlink" title="1、简述安装 Linux 系统的硬件要求。"></a>1、简述安装 Linux 系统的硬件要求。</h4><ul>
<li>CPU：主流计算机和服务器都能达到要求</li>
<li>内存：安装 Linux 系统至少需要 1GB 内存（建议使用 2GB 甚至更高内存）</li>
<li>硬盘空间：若要安装所有软件包至少需要 10GB 以上硬盘空间</li>
<li>显示器和显卡</li>
<li>DVD光驱</li>
</ul>
<h4 id="2、在你的计算机上设计一个合理的分区规划。"><a href="#2、在你的计算机上设计一个合理的分区规划。" class="headerlink" title="2、在你的计算机上设计一个合理的分区规划。"></a>2、在你的计算机上设计一个合理的分区规划。</h4><ul>
<li>最简单的分区规划 </li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>swap 分区</td>
<td>即交换分区，实现虚拟内存，建议大小是物理内存的 1~2 倍。</td>
</tr>
<tr>
<td>/boot 分区</td>
<td>用来存放与 Linux 系统启动有关的程序，比如引导装载程序等，最少 200MB。</td>
</tr>
<tr>
<td>/ 分区</td>
<td>建议大小至少在 10GB 以上。</td>
</tr>
</tbody></table>
<ul>
<li>合理的分区规划</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>swap 分区</td>
<td>实现虚拟内存，建议大小是物理内存的 1~2 倍。</td>
</tr>
<tr>
<td>/boot 分区</td>
<td>建议大小最少为 200MB。</td>
</tr>
<tr>
<td>/usr 分区</td>
<td>用来存放 Linux 系统中的应用程序，其相关数据较多，建议大小最少为 8GB。</td>
</tr>
<tr>
<td>/var 分区</td>
<td>用来存放 Linux 系统中经常变化的数据以及日志文件，建议大小最少为 1GB。</td>
</tr>
<tr>
<td>/ 分区</td>
<td>Linux 系统的根目录，所有的目录都挂在这个目录下面，建议大小最少为 1GB。</td>
</tr>
<tr>
<td>/home 分区</td>
<td>存放普通用户的数据，是普通用户的宿主目录，建议大小为剩下的空间。</td>
</tr>
</tbody></table>
<h4 id="3、简述分区命名方案。"><a href="#3、简述分区命名方案。" class="headerlink" title="3、简述分区命名方案。"></a>3、简述分区命名方案。</h4><ul>
<li>Linux 系统使用字母和数字的组合来指代硬盘分区，使用一种更加灵活的命名方案，该命名方案是基于文件的，文件名的格为 <code>/dev/xxyN</code>。</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>/dev</td>
<td>这是 Linux 系统下所有设备文件所在的目录名。</td>
</tr>
<tr>
<td>xx</td>
<td>分区名的前两个字母表示分区所在设备的类型，通常是 hd（IDE硬盘）或 sd（SCSI硬盘）。</td>
</tr>
<tr>
<td>y</td>
<td>这个字母表示分区所在的设备。</td>
</tr>
<tr>
<td>N</td>
<td>最后的数字N代表分区。</td>
</tr>
</tbody></table>
<h4 id="4、简述在安装-Linux-系统时设置计算机-IP-地址的方法。"><a href="#4、简述在安装-Linux-系统时设置计算机-IP-地址的方法。" class="headerlink" title="4、简述在安装 Linux 系统时设置计算机 IP 地址的方法。"></a>4、简述在安装 Linux 系统时设置计算机 IP 地址的方法。</h4><p><img src="/2020/03/07/Linux%E5%A4%8D%E4%B9%A0/%E8%AE%BE%E7%BD%AEipv4%E5%9C%B0%E5%9D%80.jpg" alt></p>
<h4 id="5、FirewallID-防火墙的默认连接区域是什么？"><a href="#5、FirewallID-防火墙的默认连接区域是什么？" class="headerlink" title="5、FirewallID 防火墙的默认连接区域是什么？"></a>5、FirewallID 防火墙的默认连接区域是什么？</h4><ul>
<li>默认情况下 FirewallD 防火墙的连接区域为 public，public 在公共区域内使用，指定外部连接可以进入内部网络或主机。</li>
</ul>
<h2 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h2><h4 id="1、进入字符界面有哪些方式？"><a href="#1、进入字符界面有哪些方式？" class="headerlink" title="1、进入字符界面有哪些方式？"></a>1、进入字符界面有哪些方式？</h4><ol>
<li>可以通过使用如下命令修改为进入字符界面<ul>
<li><code>systemctl set-default multi-user.target</code> </li>
</ul>
</li>
<li>打开终端命令行界面的方式，终端方式允许用户通过输入命令来管理计算机。</li>
<li>如果用户在图形界面下，那么可以使用 <code>[Ctrl+Alt+F2]~[Ctrl+ Alt+F6]</code> 组合键切换字符虚拟控制台，使用 <code>[Ctrl+Alt+F1]</code> 可以切换到图形界面。</li>
</ol>
<h4 id="2、可以使用哪些命令关闭计算机系统？"><a href="#2、可以使用哪些命令关闭计算机系统？" class="headerlink" title="2、可以使用哪些命令关闭计算机系统？"></a>2、可以使用哪些命令关闭计算机系统？</h4><ul>
<li>shutdown<ul>
<li>可以安全地关闭或重启 Linux 系统。</li>
</ul>
</li>
<li>halt<ul>
<li>halt 命令就是调用 <code>shutdown –h</code> 命令执行关机任务。</li>
</ul>
</li>
<li>init<ul>
<li>所有进程的祖先，其中 <code>init 0</code> 为关闭系统。</li>
</ul>
</li>
</ul>
<h4 id="3、简述-Linux-系统中的目标概念。"><a href="#3、简述-Linux-系统中的目标概念。" class="headerlink" title="3、简述 Linux 系统中的目标概念。"></a>3、简述 Linux 系统中的目标概念。</h4><ul>
<li>在 RHEL 7 之前的版本，使用运行级别代表特定的操作模式。运行级别被定义为七个级别，用数字 0~6 表示，每个运行级别可以启动特定的一些服务。</li>
<li>RHEL 7 使用目标（target）替换运行级别。目标使用目标单元文件描述，目标单位文件扩展名是 <code>.target</code>，目标单元文件的唯一目标是将其他 systemd 单元文件通过一连串的依赖关系组织在一起。比如 graphical.target 单元，用于启动一个图形会话 systemd 会启动像 GNOME 显示管理（gdm.service）、帐号服务（axxounts-daemon）这样的服务，并且会激活 multi-user.target 单元。相似的 multi-user.target 单元，会启动必不可少的 NetworkManager.service、dbus.service 服务并激活basic.target 单元。</li>
<li>每一个目标都有名字和独特的功能，并且能够同时启用多个。一些目标继承其他目标的服务，并启动新服务。systemd 提供了一些模仿 System V init 启动级别的目标，仍可以使用旧的 telinit 启动级别命令切换。</li>
</ul>
<table>
<thead>
<tr>
<th>运行级别</th>
<th>目标</th>
<th>目标的链接文件</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>poweroff.target</td>
<td>runlevel0.target</td>
<td>关闭系统</td>
</tr>
<tr>
<td>1</td>
<td>rescue.target</td>
<td>runlevel1.target</td>
<td>进入救援模式</td>
</tr>
<tr>
<td>2</td>
<td>multi-user.target</td>
<td>runlevel2.target</td>
<td>进入非图形界面的多用户方式</td>
</tr>
<tr>
<td>3</td>
<td>multi-user.target</td>
<td>runlevel3.target</td>
<td>进入非图形界面的多用户方式</td>
</tr>
<tr>
<td>4</td>
<td>multi-user.target</td>
<td>runlevel4.target</td>
<td>进入非图形界面的多用户方式</td>
</tr>
<tr>
<td>5</td>
<td>graphical.target</td>
<td>runlevel5.target</td>
<td>进入图形界面的多用户方式</td>
</tr>
<tr>
<td>6</td>
<td>reboot.target</td>
<td>runlevel6.target</td>
<td>重启系统</td>
</tr>
</tbody></table>
<h4 id="4、在-Linux-系统中获取帮助有哪些方式？"><a href="#4、在-Linux-系统中获取帮助有哪些方式？" class="headerlink" title="4、在 Linux 系统中获取帮助有哪些方式？"></a>4、在 Linux 系统中获取帮助有哪些方式？</h4><ol>
<li>使用 man 手册页<ul>
<li><code>man [选项] [命令名称]</code> </li>
</ul>
</li>
<li>使用 help 命令<ul>
<li><code>[命令] --help</code> </li>
</ul>
</li>
<li>使用 whereis 命令<ul>
<li><code>whereis [选项] [命令名]</code> </li>
</ul>
</li>
</ol>
<h4 id="5、有哪些重定向方式？"><a href="#5、有哪些重定向方式？" class="headerlink" title="5、有哪些重定向方式？"></a>5、有哪些重定向方式？</h4><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>输出重定向</td>
<td>command &gt; file</td>
</tr>
<tr>
<td>输入重定向</td>
<td>command &lt; file</td>
</tr>
<tr>
<td>错误重定向</td>
<td>command 2&gt; file</td>
</tr>
<tr>
<td>追加重定向</td>
<td>command &gt;&gt; file</td>
</tr>
<tr>
<td>同时实现输出和错误的重定向</td>
<td>command &amp;&gt; file</td>
</tr>
</tbody></table>
<h4 id="6、简述-vi-编辑器的工作模式。"><a href="#6、简述-vi-编辑器的工作模式。" class="headerlink" title="6、简述 vi 编辑器的工作模式。"></a>6、简述 vi 编辑器的工作模式。</h4><p>vi编辑器有3种基本工作模式，分别是命令行模式、插入模式和末行模式。</p>
<ul>
<li>命令行模式<ul>
<li>控制屏幕光标的移动，字符、字或行的删除，移动、复制某区域及进入插入模式，或者到末行模式。</li>
</ul>
</li>
<li>插入模式<ul>
<li>只有在插入模式下，才可以做文字输入，按 Esc 键可回到命令行模式。</li>
</ul>
</li>
<li>末行模式<ul>
<li>将文件保存或退出 vi 编辑器，也可以设置编辑环境，如寻找字符串、列出行号等。</li>
</ul>
</li>
</ul>
<h2 id="第四章"><a href="#第四章" class="headerlink" title="第四章"></a>第四章</h2><h4 id="1、Linux-系统中有哪些文件类型？"><a href="#1、Linux-系统中有哪些文件类型？" class="headerlink" title="1、Linux 系统中有哪些文件类型？"></a>1、Linux 系统中有哪些文件类型？</h4><p>普通文件、目录文件、设备文件、管道文件和符号链接文件等。</p>
<h4 id="2、简述软链接文件和硬链接文件的区别。"><a href="#2、简述软链接文件和硬链接文件的区别。" class="headerlink" title="2、简述软链接文件和硬链接文件的区别。"></a>2、简述软链接文件和硬链接文件的区别。</h4><ul>
<li>硬链接记录的是目标的 inode，软链接记录的是目标的路径。</li>
<li>软链接就像是快捷方式，而硬链接就像是备份。</li>
<li>软链接可以做跨分区的链接，而硬链接由于 inode 的缘故，只能在本分区中做链接。</li>
<li>所以软链接的使用频率要高得多。 </li>
</ul>
<h4 id="3、简述-Linux-系统中的文件目录。"><a href="#3、简述-Linux-系统中的文件目录。" class="headerlink" title="3、简述 Linux 系统中的文件目录。"></a>3、简述 Linux 系统中的文件目录。</h4><ul>
<li><p>Linux 系统都有根文件系统，它包含系统引导和使其他文件系统得以挂载所必要的文件，根文件系统需要有单用户状态所必须的足够的内容，还应该包括修复损坏系统、恢复备份等工具。</p>
</li>
<li><p>Linux 系统的目录结构是分层的树形结构，都是挂载在根文件系统 <code>/</code> 下。  </p>
</li>
</ul>
<h4 id="4、简述使用-ls-l-命令显示的详细信息。"><a href="#4、简述使用-ls-l-命令显示的详细信息。" class="headerlink" title="4、简述使用 ls -l 命令显示的详细信息。"></a>4、简述使用 <code>ls -l</code> 命令显示的详细信息。</h4><p><code>-rw-r--r-- 1 h2p staff 230 Nov 25 21:33 test.sh</code> </p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>第 1 列</td>
<td>第 1 个字符表示文件的类型<br>第 2～4 个字符表示文件所有者对此文件的访问权限<br>第 5～7 个字符表示用户组对此文件的访问权限<br>第 8～10 个字符表示其他用户对此文件的访问权限</td>
</tr>
<tr>
<td>第 2 列</td>
<td>文件的连接数</td>
</tr>
<tr>
<td>第 3 列</td>
<td>文件的所有者</td>
</tr>
<tr>
<td>第 4 列</td>
<td>文件的用户组名</td>
</tr>
<tr>
<td>第 5 列</td>
<td>文件所占的字节数</td>
</tr>
<tr>
<td>第 6～8 列</td>
<td>文件上一次的修改时间</td>
</tr>
<tr>
<td>第 9 列</td>
<td>文件名</td>
</tr>
</tbody></table>
<h4 id="5、使用什么命令可以删除具有子目录的目录？"><a href="#5、使用什么命令可以删除具有子目录的目录？" class="headerlink" title="5、使用什么命令可以删除具有子目录的目录？"></a>5、使用什么命令可以删除具有子目录的目录？</h4><p><code>rm -r {dirPath}</code> </p>
<h2 id="第五章"><a href="#第五章" class="headerlink" title="第五章"></a>第五章</h2><h4 id="1、常用的文本内容显示命令有哪些？区别是什么？"><a href="#1、常用的文本内容显示命令有哪些？区别是什么？" class="headerlink" title="1、常用的文本内容显示命令有哪些？区别是什么？"></a>1、常用的文本内容显示命令有哪些？区别是什么？</h4><p>这些命令有：cat、more、less、head、tail。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>cat</td>
<td>显示文本文件的内容，也可以把几个文件内容附加到另一个文件中。</td>
</tr>
<tr>
<td>more</td>
<td>分页显示文本文件的内容。类似于 cat 命令，不过是以分页方式显示文件内容，方便使用者逐页阅读。</td>
</tr>
<tr>
<td>less</td>
<td>回卷显示文本文件的内容。less 命令的作用与 more 十分相似，都可以用来浏览文本文件的内容，不同的是 less 命令允许使用者往回卷动。</td>
</tr>
<tr>
<td>head</td>
<td>显示指定文件的前若干行文件内容。如果没有给出具体行数值，默认缺省设置为 10 行。如果没有指定文件，head 就从标准输入读取。</td>
</tr>
<tr>
<td>tail</td>
<td>查看文件的末尾数据，默认显示指定文件的最后 10 行到标准输出。</td>
</tr>
</tbody></table>
<h4 id="2、常用的文本处理命令有哪些？区别是什么？"><a href="#2、常用的文本处理命令有哪些？区别是什么？" class="headerlink" title="2、常用的文本处理命令有哪些？区别是什么？"></a>2、常用的文本处理命令有哪些？区别是什么？</h4><table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>sort</td>
<td>对文件中的数据进行排序，并将结果显示在标准输出上。</td>
</tr>
<tr>
<td>uniq</td>
<td>将文件内的重复行数据从输出文件中删除，只留下每条记录的惟一样本。</td>
</tr>
<tr>
<td>cut</td>
<td>从文件的每行中输出选定的字节、字符或字段(域)。</td>
</tr>
<tr>
<td>comm</td>
<td>比较两个已排过序的文件，并将其结果显示出来。</td>
</tr>
<tr>
<td>diff</td>
<td>逐行比较两个文本文件，列出其不同之处。</td>
</tr>
</tbody></table>
<h4 id="3、使用什么命令能显示当前计算机的内核版本？"><a href="#3、使用什么命令能显示当前计算机的内核版本？" class="headerlink" title="3、使用什么命令能显示当前计算机的内核版本？"></a>3、使用什么命令能显示当前计算机的内核版本？</h4><p><code>uname -r</code> </p>
<h4 id="4、使用什么命令能清除计算机屏幕信息？"><a href="#4、使用什么命令能清除计算机屏幕信息？" class="headerlink" title="4、使用什么命令能清除计算机屏幕信息？"></a>4、使用什么命令能清除计算机屏幕信息？</h4><p><code>clear</code> </p>
<h4 id="5、使用什么命令可以以倒序方式排序文件内容？"><a href="#5、使用什么命令可以以倒序方式排序文件内容？" class="headerlink" title="5、使用什么命令可以以倒序方式排序文件内容？"></a>5、使用什么命令可以以倒序方式排序文件内容？</h4><p><code>sort -t</code> </p>
<h2 id="第六章"><a href="#第六章" class="headerlink" title="第六章"></a>第六章</h2><h4 id="1、简述一个简单-Shell-程序的创建过程。"><a href="#1、简述一个简单-Shell-程序的创建过程。" class="headerlink" title="1、简述一个简单 Shell 程序的创建过程。"></a>1、简述一个简单 Shell 程序的创建过程。</h4><ol>
<li>使用 vi 编辑文件，文件第一行为 <code>#!/bin/bash</code> （<code>#!</code> 后面表示用来执行该文件的程序）。</li>
<li>执行 <code>chmod +x</code> 命令设置可执行权限。</li>
<li>执行 Shell 程序。</li>
</ol>
<h4 id="2、简述执行-Shell-程序的方法。"><a href="#2、简述执行-Shell-程序的方法。" class="headerlink" title="2、简述执行 Shell 程序的方法。"></a>2、简述执行 Shell 程序的方法。</h4><ul>
<li>执行 <code>chmod +x</code> 设置文件执行权限，输入文件完整路径执行 Shell 程序。</li>
<li>如果不设置可执行权限，需要执行 <code>bash {filePath}</code> 来执行 bash 程序。</li>
</ul>
<h4 id="3、简述常见的-Shell-环境变量。"><a href="#3、简述常见的-Shell-环境变量。" class="headerlink" title="3、简述常见的 Shell 环境变量。"></a>3、简述常见的 Shell 环境变量。</h4><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>$HOME</td>
<td>用户主目录的完全路径名</td>
</tr>
<tr>
<td>$PATH</td>
<td>用于保存用冒号分隔的目录路径名，Shell 将按 PATH 变量中给出的顺序搜索这些目录，<br>找到的第一个与命令名称一致的可执行文件将被执行。</td>
</tr>
<tr>
<td>$TERM</td>
<td>终端的类型</td>
</tr>
<tr>
<td>UID</td>
<td>当前用户的 UID，由数字构成</td>
</tr>
<tr>
<td>PWD</td>
<td>当前工作目录的绝对路径</td>
</tr>
<tr>
<td>PS1</td>
<td>主提示符。在 root 用户下默认的主提示符是 <code>#</code>，在普通用户下默认的主提示符是 <code>$</code></td>
</tr>
<tr>
<td>PS2</td>
<td>辅助提示符，提示用户继续输入命令的其余部分，默认的辅助提示符是 <code>&gt;</code> 。<br>在 Shell 接收用户输入命令的过程中，如果用户在输入行的末尾输入 <code>\</code> 然后按回车键，<br>或者当用户按回车键时 Shell 判断出用户输入的命令没有结束时，就显示这个辅助提示符。</td>
</tr>
</tbody></table>
<h4 id="4、简述常用的字符串比较符号。"><a href="#4、简述常用的字符串比较符号。" class="headerlink" title="4、简述常用的字符串比较符号。"></a>4、简述常用的字符串比较符号。</h4><ul>
<li>字符串比较是用来测试字符串是否相同、长度是否为0、字符串是否为 null。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">字符串比较符号</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">=</td>
<td align="center">比较两个字符串是否相同，相同则为“是”</td>
</tr>
<tr>
<td align="center">!=</td>
<td align="center">比较两个字符串是否相同，不同则为“是”</td>
</tr>
<tr>
<td align="center">-n</td>
<td align="center">比较字符串的长度是否大于 0，如果大于 0 则为“是”</td>
</tr>
<tr>
<td align="center">-z</td>
<td align="center">比较字符串的长度是否等于 0，如果等于 0 则为“是”</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">数字比较符号</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-eq</td>
<td align="center">$=$</td>
</tr>
<tr>
<td align="center">-ge</td>
<td align="center">$\ge$</td>
</tr>
<tr>
<td align="center">-le</td>
<td align="center">$\le$</td>
</tr>
<tr>
<td align="center">-ne</td>
<td align="center">$\ne$</td>
</tr>
<tr>
<td align="center">-gt</td>
<td align="center">$\gt$</td>
</tr>
<tr>
<td align="center">-lt</td>
<td align="center">$\lt$</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">逻辑测试符号</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">!</td>
<td align="center">非</td>
</tr>
<tr>
<td align="center">-a</td>
<td align="center">与</td>
</tr>
<tr>
<td align="center">-o</td>
<td align="center">或</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">myZero=0</span><br><span class="line">myOne=1</span><br><span class="line">myTwo=2</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span> <span class="variable">$myZero</span> -eq 0 -a <span class="variable">$myOne</span> -eq 2</span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span> <span class="variable">$myZero</span> -eq 0 -a <span class="variable">$myOne</span> -eq 1</span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 0</span></span><br></pre></td></tr></table></figure>



<h4 id="5、Linux-系统中有哪些条件判断语句和循环控制流程语句？"><a href="#5、Linux-系统中有哪些条件判断语句和循环控制流程语句？" class="headerlink" title="5、Linux 系统中有哪些条件判断语句和循环控制流程语句？"></a>5、Linux 系统中有哪些条件判断语句和循环控制流程语句？</h4><ul>
<li><p><code>if</code> 条件语句</p>
<ul>
<li><p><a href="https://www.cnblogs.com/avivahe/p/5635911.html" target="_blank" rel="noopener">linux shell 之if——-用if做判断</a> </p>
</li>
<li><p><code>if-then-fi</code> </p>
<ul>
<li><pre><code class="bash"><span class="keyword">if</span> {<span class="built_in">command</span>}
<span class="keyword">then</span>
{<span class="built_in">command</span>}
<span class="keyword">fi</span>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- &#96;if-then-else-fi&#96; </span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;bash</span><br><span class="line">    if &#123;command&#125;</span><br><span class="line">    then</span><br><span class="line">    &#123;command&#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;command&#125;</span><br><span class="line">    fi</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><pre><code class="bash"><span class="meta">#!/bin/bash</span>

<span class="built_in">echo</span> -n <span class="string">"Input 0 or 1 : "</span>
<span class="built_in">read</span> inputNum

<span class="keyword">if</span> [ <span class="variable">$inputNum</span> -eq 0 ]
<span class="keyword">then</span>
<span class="built_in">echo</span> <span class="string">'Input is 0.'</span>
<span class="keyword">elif</span> [ <span class="variable">$inputNum</span> = 1 ]; <span class="keyword">then</span>
<span class="built_in">echo</span> <span class="string">"Input is 1."</span>
<span class="keyword">else</span>
<span class="built_in">echo</span> <span class="string">"Invalid num : <span class="variable">$inputNum</span>."</span>
<span class="keyword">fi</span>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- &#96;case&#96; 条件语句</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;bash</span><br><span class="line">    case &#123;param&#125; in</span><br><span class="line">    &#123;exp-1&#125;) &#123;command&#125;;;</span><br><span class="line">    &#123;exp-2&#125;) &#123;command&#125;;;</span><br><span class="line">    ...;;</span><br><span class="line">    *) &#123;command&#125;</span><br><span class="line">    esac</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">myStr=abc</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$myStr</span> <span class="keyword">in</span></span><br><span class="line">a)   <span class="built_in">echo</span> <span class="string">'myStr is a'</span>;;</span><br><span class="line">ab)  <span class="built_in">echo</span> <span class="string">'myStr is ab'</span>;;</span><br><span class="line">abc) <span class="built_in">echo</span> <span class="string">'myStr is abc'</span>;;</span><br><span class="line">*)   <span class="built_in">echo</span> <span class="variable">$myStr</span></span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p>通过计算字符串 param 的值，将其结 果依次与运算式 exp-1 和 exp-2 等进行比较， 直到找到一个匹配的运算式为止。如果找到了匹配项，则执行它下面的命令直到遇到一对分号 <code>;;</code> 为止。</p>
</li>
</ul>
</li>
</ul>
<h4 id="6、简述-if-条件语句和-case-条件语句的区别。"><a href="#6、简述-if-条件语句和-case-条件语句的区别。" class="headerlink" title="6、简述 if 条件语句和 case 条件语句的区别。"></a>6、简述 <code>if</code> 条件语句和 <code>case</code> 条件语句的区别。</h4><ul>
<li>使用 case 语句的选项比较多 </li>
</ul>
<h2 id="第七章"><a href="#第七章" class="headerlink" title="第七章"></a>第七章</h2><h4 id="1、在-Linux-系统中用户账户有哪些分类？"><a href="#1、在-Linux-系统中用户账户有哪些分类？" class="headerlink" title="1、在 Linux 系统中用户账户有哪些分类？"></a>1、在 Linux 系统中用户账户有哪些分类？</h4><ul>
<li>root用户、系统用户和普通用户</li>
</ul>
<h4 id="2、管理用户账户的配置文件有哪些？并描述这些文件各字段的含义。"><a href="#2、管理用户账户的配置文件有哪些？并描述这些文件各字段的含义。" class="headerlink" title="2、管理用户账户的配置文件有哪些？并描述这些文件各字段的含义。"></a>2、管理用户账户的配置文件有哪些？并描述这些文件各字段的含义。</h4><ul>
<li><code>/etc/passwd</code> <ul>
<li>每一行表示的是一个用户账户的信息，一行有 7 个段位，每个段位用 <code>:</code> 分隔。 </li>
<li><code>zhangsan:x:1000:1000:张三:/home/zhangsan:/bin/bash</code> </li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th align="left">字段含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">用户名</td>
<td align="left">也称为登录名，在系统内用户名应该具有惟一性。在本例中， zhangsan 就是用户名。</td>
</tr>
<tr>
<td align="center">密码</td>
<td align="left">存放加密用户的密码，看到的是一个 x，其实密码已被映射到 /etc/shadow 文件中。</td>
</tr>
<tr>
<td align="center">用户标识号（UID）</td>
<td align="left">在系统内用一个整数标识用户 ID 号，每个用户的 UID 都是惟一 的，root 用户的 UID 是 0，普通用户的 UID 默认从 1000 开始，本例中的用户 zhangsan 的 UID 是 1000。</td>
</tr>
<tr>
<td align="center">群组标识号（GID）</td>
<td align="left">在系统内用一个整数标识用户所属的主要组群 ID 号，每个组群的 GID 都是惟一的。</td>
</tr>
<tr>
<td align="center">用户名全称</td>
<td align="left">用户名描述，可以不设置。在本例中，zhangsan 用户的用户名全称是张三。</td>
</tr>
<tr>
<td align="center">主目录</td>
<td align="left">用户登录系统后首先进入的目录，zhangsan 用户的主目录是 /home/zhangsan。</td>
</tr>
<tr>
<td align="center">登录 Shell</td>
<td align="left">用户使用的 Shell 类型，Linux 系统默认使用的 Shell 是 /bin/bash。</td>
</tr>
</tbody></table>
<ul>
<li><code>/etc/shadow</code> <ul>
<li><code>zhangsan:$6$E/xvWMmh$rhYLQwwffEqIudVLFzMlvkb0iN4.0Ol uk6H.UovEYN0/99dVoHXcaCNGZZkFY1S3QHYgm7e6JPzEew6ybmN 4e0:16364:0:99999:7:::</code> </li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th>字段含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">用户名</td>
<td>这里的用户名和 /etc/passwd 中的用户名是相同的。</td>
</tr>
<tr>
<td align="center">加密密码</td>
<td>密码已经加密，如果有些用户在这里显示的是“!!”，则表示这个用户还没有设置密码，不能登录到系统。</td>
</tr>
<tr>
<td align="center">用户最后一次更改密码的日期</td>
<td>从1970年1月1日算起到最后一次修改密码的时间间隔天数。</td>
</tr>
<tr>
<td align="center">密码允许更换前的天数</td>
<td>如果设置为 0，则禁用此功能。该字段是指用户可以更改密码的天数。</td>
</tr>
<tr>
<td align="center">密码需要更换的天数</td>
<td>如果设置为 0，则禁用此功能。该字段是指用户必须更改密码的天数。</td>
</tr>
<tr>
<td align="center">密码更换前警告的天数</td>
<td>用户登录系统后，系统登录程序提醒用户密码将要过期。</td>
</tr>
<tr>
<td align="center">账户被取消激活前的天数</td>
<td>表示用户密码过期多少天后，系统会禁用此用户，也就是说系统会不让此用户登录，也不会提示用户过期，是完全禁用的。</td>
</tr>
<tr>
<td align="center">用户账户过期日期</td>
<td>指定用户账户禁用的天数(从1970年的1月1日开始到账户被禁用的天 数)，如果这个字段的值为空，账户永久可用。</td>
</tr>
<tr>
<td align="center">保留字段</td>
<td>目前为空，以备将来Linux系统发展时使用。</td>
</tr>
</tbody></table>
<h4 id="3、管理组群账户的配置文件有哪些？并描述这些文件各字段的含义。"><a href="#3、管理组群账户的配置文件有哪些？并描述这些文件各字段的含义。" class="headerlink" title="3、管理组群账户的配置文件有哪些？并描述这些文件各字段的含义。"></a>3、管理组群账户的配置文件有哪些？并描述这些文件各字段的含义。</h4><ul>
<li><code>/etc/group</code> <ul>
<li><code>zhangsan:x:1000:</code> </li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th>字段含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">组群名</td>
<td>组群名称，如组群名 root。</td>
</tr>
<tr>
<td align="center">组群密码</td>
<td>存放加密的组群密码，看到一个 x，密码已被映射到 /etc/gshadow 文件中。</td>
</tr>
<tr>
<td align="center">组群标识号（GID）</td>
<td>在系统内用一个整数标识组群 GID，每个组群的 GID 都是惟一的，默认普通组群的 GID 从 1000 开始， root 组群 GID 是 0。</td>
</tr>
<tr>
<td align="center">组群成员</td>
<td>属于这个组群的成员，如 root 组群的成员有 root 用户。</td>
</tr>
</tbody></table>
<ul>
<li><code>/etc/gshadow</code> <ul>
<li><code>beijing:$6$E/xvWMmh$rhYLQwwffEqIudVLFzMlv1::ou</code> </li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">字段</th>
<th>字段含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">组群名</td>
<td>组群的名称</td>
</tr>
<tr>
<td align="center">组群密码</td>
<td>密码已经加密，如果有些组群在这里显示的是 “!”，表示这个组群没有密码。本例中组群 shanghai 没有密码，组群 beijing 已设置密码。</td>
</tr>
<tr>
<td align="center">组群管理员</td>
<td>组群的管理者，有权在该组群中添加、删除用户。</td>
</tr>
<tr>
<td align="center">组群成员</td>
<td>属于该组群的用户成员列表，如有多个用户用逗号分隔。本例中 beijing 组群的成员是 ou。</td>
</tr>
</tbody></table>
<h4 id="4、默认情况下新创建的第一个用户账户-UID-是多少？"><a href="#4、默认情况下新创建的第一个用户账户-UID-是多少？" class="headerlink" title="4、默认情况下新创建的第一个用户账户 UID 是多少？"></a>4、默认情况下新创建的第一个用户账户 UID 是多少？</h4><ul>
<li>新创建的用户账户默认是被锁定的，无法使用，需要使用 passwd 命令设置密码以后才能使用。<ul>
<li><code>useradd zhangsan</code> </li>
<li><code>passwd zhangsan</code> </li>
<li><code>usermod zhangsan</code> </li>
<li><code>userdel zhangsan</code> </li>
</ul>
</li>
<li>默认情况下新创建的第一个用户账户 UID 是 1000。</li>
</ul>
<h4 id="5、简述对用户账户设置密码和不设置密码的区别。"><a href="#5、简述对用户账户设置密码和不设置密码的区别。" class="headerlink" title="5、简述对用户账户设置密码和不设置密码的区别。"></a>5、简述对用户账户设置密码和不设置密码的区别。</h4><ul>
<li>用户账户未设置密码，不能登录到系统。</li>
</ul>
<h2 id="第八章"><a href="#第八章" class="headerlink" title="第八章"></a>第八章</h2><h4 id="1、简述磁盘分区的含义。"><a href="#1、简述磁盘分区的含义。" class="headerlink" title="1、简述磁盘分区的含义。"></a>1、简述磁盘分区的含义。</h4><ul>
<li>磁盘分区是指对硬盘物理介质的逻辑划分。 </li>
<li>分区就是磁盘的“段落”，如果用户希望在计算机上安装多个操作系统，将需要更多的分区。 </li>
</ul>
<h4 id="2、简述格式化的含义。"><a href="#2、简述格式化的含义。" class="headerlink" title="2、简述格式化的含义。"></a>2、简述格式化的含义。</h4><ul>
<li>格式化是指对磁盘分区进行初始化的一种操作，这种操作通常会导致现有的分区中所有的数据被清除。 </li>
<li>格式化是在磁盘中建立磁道和扇区，建立好之后，计算机才可以使用磁盘来储存数据。  </li>
</ul>
<h4 id="3、fdisk-命令有哪些子命令？其含义分别是什么？"><a href="#3、fdisk-命令有哪些子命令？其含义分别是什么？" class="headerlink" title="3、fdisk 命令有哪些子命令？其含义分别是什么？"></a>3、<code>fdisk</code> 命令有哪些子命令？其含义分别是什么？</h4><table>
<thead>
<tr>
<th align="center">子命令</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">m</td>
<td>显示所有能在fdisk中使用的子命令</td>
</tr>
<tr>
<td align="center">p</td>
<td>显示磁盘分区信息</td>
</tr>
<tr>
<td align="center">a</td>
<td>设置磁盘启动分区</td>
</tr>
<tr>
<td align="center">n</td>
<td>创建新的分区</td>
</tr>
<tr>
<td align="center">e</td>
<td>创建扩展分区</td>
</tr>
<tr>
<td align="center">p</td>
<td>创建主分区</td>
</tr>
<tr>
<td align="center">t</td>
<td>更改分区的系统ID（也就是分区类型ID）</td>
</tr>
<tr>
<td align="center">d</td>
<td>删除磁盘分区</td>
</tr>
<tr>
<td align="center">q</td>
<td>退出fdisk，不保存磁盘分区设置</td>
</tr>
<tr>
<td align="center">l</td>
<td>列出已知的分区类型</td>
</tr>
<tr>
<td align="center">v</td>
<td>验证分区表</td>
</tr>
<tr>
<td align="center">w</td>
<td>保存磁盘分区设置并退出 fdisk</td>
</tr>
</tbody></table>
<h4 id="4、Linux-系统中常用的文件系统有哪些？"><a href="#4、Linux-系统中常用的文件系统有哪些？" class="headerlink" title="4、Linux 系统中常用的文件系统有哪些？"></a>4、Linux 系统中常用的文件系统有哪些？</h4><ul>
<li>XFS、ext4、JFS、ReiserFS、ext2、 ext3、ISO9660、MSDOS，VFAT、NFS 等</li>
</ul>
<h4 id="5、使用新磁盘存储数据一般要经过哪些操作？"><a href="#5、使用新磁盘存储数据一般要经过哪些操作？" class="headerlink" title="5、使用新磁盘存储数据一般要经过哪些操作？"></a>5、使用新磁盘存储数据一般要经过哪些操作？</h4><ol>
<li>对磁盘进行分区</li>
<li>格式化分区</li>
<li>创建文件系统</li>
<li>挂载文件系统</li>
</ol>
<h4 id="6、要实现开机自动挂载文件系统，可以通过哪些方式来实现？"><a href="#6、要实现开机自动挂载文件系统，可以通过哪些方式来实现？" class="headerlink" title="6、要实现开机自动挂载文件系统，可以通过哪些方式来实现？"></a>6、要实现开机自动挂载文件系统，可以通过哪些方式来实现？</h4><ol>
<li>修改 <code>/etc/fstab</code> 文件<ul>
<li><code>/dev/sda5 /mnt/kk ext4 defaults 0 0</code> <ul>
<li>设备、挂载目录、文件系统类型、挂载选项、转储选项（0 表示文件系统不需要备份）、文件系统检查选项（0 表示不检查文件系统）</li>
<li>其中设备<ul>
<li>使用设备名：<code>/dev/sda5</code> </li>
<li>使用 UUID：<code>UUID=f084b8a6-c9ab-425b-99da-b64cb35e4fc2</code> </li>
<li>使用卷标：<code>LABEL=www</code> <ul>
<li><code>xfs_admin -l /dev/sda5</code> 查看卷标信息</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="第九章"><a href="#第九章" class="headerlink" title="第九章"></a>第九章</h2><h4 id="1、使用-RPM-软件包管理的用途是什么？"><a href="#1、使用-RPM-软件包管理的用途是什么？" class="headerlink" title="1、使用 RPM 软件包管理的用途是什么？"></a>1、使用 RPM 软件包管理的用途是什么？</h4><ul>
<li>RPM（Red Hat Package Manager，Red Hat 软件包管理器）是一种开放的软件包管理系统，按照 GPL 条款发行，可以运行于各种 Linux 系统上。</li>
<li>RPM 简化了 Linux 系统安装、卸装、更新和升级的过程，只需要使用简短的命令就可完成。</li>
</ul>
<h4 id="2、简述升级-RPM-软件包和刷新-RPM-软件包的区别。"><a href="#2、简述升级-RPM-软件包和刷新-RPM-软件包的区别。" class="headerlink" title="2、简述升级 RPM 软件包和刷新 RPM 软件包的区别。"></a>2、简述升级 RPM 软件包和刷新 RPM 软件包的区别。</h4><ul>
<li>使用 <code>rpm -Uvh</code> 命令可以在 Linux 系统中升级 RPM 软件包，升级软件包是删除和安装的组合。不管该软件包的早期版本是 否已被安装，升级选项都会安装该软件包。</li>
<li>使用 <code>rpm -Fvh</code> 命令可以在 Linux 系统中刷新 RPM 软件包。使用 RPM 刷新软件包时，系统会比较指定的软件包的版本和系统上已安装的版本。当 RPM 的刷新选项处理的版本比已安装的版本更新，它就会升级到更新的版本。如果软件包先前没有安装，RPM 的刷新选项将不会安装该软件包，这和 RPM 的升级选项不同。</li>
</ul>
<h4 id="3、简述在本地磁盘上创建本地软件仓库的步骤。"><a href="#3、简述在本地磁盘上创建本地软件仓库的步骤。" class="headerlink" title="3、简述在本地磁盘上创建本地软件仓库的步骤。"></a>3、简述在本地磁盘上创建本地软件仓库的步骤。</h4><ol>
<li>安装 deltarpm、python-deltarpm 和 createrepo 软件包。</li>
<li>复制 Linux 系统安装光盘中的软件包。</li>
<li>创建软件仓库配置文件。</li>
<li>使用 createrepo 命令创建软件仓库。 </li>
</ol>
<h4 id="4、tar-命令可以调用哪些压缩程序？"><a href="#4、tar-命令可以调用哪些压缩程序？" class="headerlink" title="4、tar 命令可以调用哪些压缩程序？"></a>4、tar 命令可以调用哪些压缩程序？</h4><ul>
<li><code>tar cvf {name}.tar {filePath}</code> </li>
<li><code>tar xvf {name}.tar</code> </li>
<li>调用 gzip<ul>
<li>使用 -z 选项来调用 gzip </li>
<li><code>tar -zcvf {name}.tar.gz {filePath}</code> </li>
</ul>
</li>
<li>调用 bzip2<ul>
<li>使用 -j 选项来调用 bzip2</li>
<li><code>tar -jcvf {name}.tar.gz {filePath}</code> </li>
</ul>
</li>
<li>调用 xz<ul>
<li>使用 -J 选项来调用</li>
<li><code>tar -Jcvf {name}.tar.gz {filePath}</code> </li>
</ul>
</li>
</ul>
<h2 id="第十章"><a href="#第十章" class="headerlink" title="第十章"></a>第十章</h2><h4 id="1、文件有哪些权限？其含义分别是什么？"><a href="#1、文件有哪些权限？其含义分别是什么？" class="headerlink" title="1、文件有哪些权限？其含义分别是什么？"></a>1、文件有哪些权限？其含义分别是什么？</h4><ul>
<li>三种用户访问<ul>
<li>文件所有者、文件的组群所有者、系统中的其他用户</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">基本权限</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">r</td>
<td>对文件而言，该用户具有读取文件内容 的权限；对目录来说，该用户具有浏览目录的权 限;</td>
</tr>
<tr>
<td align="center">w</td>
<td>对文件而言，该用户具有新增、修改 文件内容的权限;对目录来说，该用户具有删除、移动目录内文件的权限;</td>
</tr>
<tr>
<td align="center">x</td>
<td>对文件而言，该用户具有执行文件的 权限;对目录来来说，该用户具有进入目录的权限;</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">特殊权限</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">SUID（u+s）</td>
<td>对一个可执行文件，不是以发起者身份来获取资源，而是以可执行文件的用户所有者身份来执行;对一个目录无影响。</td>
</tr>
<tr>
<td align="center">SGID（g+s）</td>
<td>对一个可执行文件，不是以发起者身份来获取资源，而是以可执行文件的组群所有者身份来执行；对一个目录，在该目录中创建的任意新文件的所属组与该目录的所属组相同。</td>
</tr>
<tr>
<td align="center">Sticky（o+t）</td>
<td>对一个可执行文件无影响；对目录设置 Sticky 之后，尽管其它用户有写权限，也必须由文件所有者执行删除和移动等操作。</td>
</tr>
</tbody></table>
<h4 id="2、可以使用哪些方法设置文件的权限？"><a href="#2、可以使用哪些方法设置文件的权限？" class="headerlink" title="2、可以使用哪些方法设置文件的权限？"></a>2、可以使用哪些方法设置文件的权限？</h4><ol>
<li>文字设定法<ul>
<li><code>chmod [操作对象] [操作符号] [权限] [文件|目录]</code> </li>
<li><code>chmod [ugoa] [+-=] [rwx] [file|dir]</code> </li>
<li><code>chmod u+w a.txt</code> </li>
</ul>
</li>
<li>数字设定法<ul>
<li><code>chmod [n1n2n3] [文件|目录]</code> </li>
<li>n1 表示用户所有者的权限 ，n2 表示组群所 有者的权限，n3 表示其它用户的权限。</li>
</ul>
</li>
</ol>
<h2 id="第十一章"><a href="#第十一章" class="headerlink" title="第十一章"></a>第十一章</h2><h4 id="1、简述-Linux-系统的进程分类。"><a href="#1、简述-Linux-系统的进程分类。" class="headerlink" title="1、简述 Linux 系统的进程分类。"></a>1、简述 Linux 系统的进程分类。</h4><ul>
<li>交互式进程<ul>
<li>一个由 Shell 启动并控制的进程，交互式进程既可在前台运行，也可在后台运行。</li>
</ul>
</li>
<li>批处理进程<ul>
<li>与终端无关，安排在指定时刻完成的一系列进程。</li>
</ul>
</li>
<li>守护进程<ul>
<li>在引导系统时启动，以执行即时的操作系统任务，比如 crond、rsyslogd、named 等。</li>
</ul>
</li>
</ul>
<h4 id="2、简述-Linux-系统的启动过程。"><a href="#2、简述-Linux-系统的启动过程。" class="headerlink" title="2、简述 Linux 系统的启动过程。"></a>2、简述 Linux 系统的启动过程。</h4><ol>
<li>BIOS 自检</li>
<li>启动 GRUB 2</li>
<li>加载内核</li>
<li>执行 systemd 进程</li>
<li>初始化系统环境</li>
<li>执行 <code>/bin/login</code> 程序</li>
</ol>
<h4 id="3、简述-GRUB-2-所具有的新功能。"><a href="#3、简述-GRUB-2-所具有的新功能。" class="headerlink" title="3、简述 GRUB 2 所具有的新功能。"></a>3、简述 GRUB 2 所具有的新功能。</h4><ul>
<li>采用模块化动态加载的思想。 </li>
<li>图形接口。</li>
<li>使用模块机制，通过动态加载需要的模块来扩展功能。</li>
<li>支持脚本语言，比如条件判断、循环、变量和函数。</li>
<li>支持救援模式，可以用于系统无法引导的情况。</li>
<li>国际化语言。包括支持非 ASCII 的字符集和类似 gettext 的消息分类、字体、图形控制台等。</li>
<li>有一个灵活的命令行接口。如果不存在配置文件， GRUB 2 会自动进入命令模式。</li>
<li>针对文件系统、文件、设备、驱动、终端、命令、分 区表、系统加载的模块化、层次化、基于对象的框架。</li>
<li>支持多种文件系统格式。</li>
<li>可以访问已经安装在设备上的数据。</li>
<li>支持自动解压。</li>
</ul>
<h4 id="4、简述-GRUB-2-密码支持的两种格式。"><a href="#4、简述-GRUB-2-密码支持的两种格式。" class="headerlink" title="4、简述 GRUB 2 密码支持的两种格式。"></a>4、简述 GRUB 2 密码支持的两种格式。</h4><ul>
<li>明文密码<ul>
<li>密码数据没有经过加密，安全性差。</li>
</ul>
</li>
<li>PBKDF2 加密密码<ul>
<li>密码经过 PBKDF2 哈希算法进行加密，在文件中存储的是加密后的密码数据，安全性较高。</li>
</ul>
</li>
</ul>
<h2 id="第十二章"><a href="#第十二章" class="headerlink" title="第十二章"></a>第十二章</h2><h4 id="1、简述网卡配置文件的内容。"><a href="#1、简述网卡配置文件的内容。" class="headerlink" title="1、简述网卡配置文件的内容。"></a>1、简述网卡配置文件的内容。</h4><ul>
<li>网卡配置文件保存在 <code>/etc/sysconfig/network-scripts</code> 目录下，一个网卡对应一个配置文件，以 <code>ifcfg-</code> 开头。</li>
</ul>
<table>
<thead>
<tr>
<th align="left">关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">DEVICE</td>
<td>网卡名称</td>
</tr>
<tr>
<td align="left">HWADDR</td>
<td>Mac 地址、硬件地址</td>
</tr>
<tr>
<td align="left">TYPE</td>
<td>网络类型</td>
</tr>
<tr>
<td align="left">BOOTPROPT</td>
<td>网卡获取 IP 地址的方式</td>
</tr>
<tr>
<td align="left">IPADDR</td>
<td>ip 地址</td>
</tr>
<tr>
<td align="left">NETMASK</td>
<td>子网掩码</td>
</tr>
<tr>
<td align="left">GATEWAY</td>
<td>网关</td>
</tr>
</tbody></table>
<h4 id="2、测试网络连通可以使用哪些命令？"><a href="#2、测试网络连通可以使用哪些命令？" class="headerlink" title="2、测试网络连通可以使用哪些命令？"></a>2、测试网络连通可以使用哪些命令？</h4><ul>
<li><code>ping [选项] [目标]</code> </li>
<li><code>netstat -antu | grep [端口号]</code> </li>
<li><code>traceroute [目标]</code> </li>
</ul>
<h4 id="3、DNS-服务使用什么端口号？"><a href="#3、DNS-服务使用什么端口号？" class="headerlink" title="3、DNS 服务使用什么端口号？"></a>3、DNS 服务使用什么端口号？</h4><ul>
<li>DNS 协议运行在 UDP 协议之上，使用端口号 53。</li>
</ul>
<h2 id="第十三章"><a href="#第十三章" class="headerlink" title="第十三章"></a>第十三章</h2><h4 id="1、简述-OpenSSH-替代-telnet-的主要原因。"><a href="#1、简述-OpenSSH-替代-telnet-的主要原因。" class="headerlink" title="1、简述 OpenSSH 替代 telnet 的主要原因。"></a>1、简述 OpenSSH 替代 telnet 的主要原因。</h4><ul>
<li>使用 OpenSSH 工具将增进系统安全性，在使用 OpenSSH 软件进行通信时，登录验证口令将会被加密。</li>
<li>OpenSSH 提供了服务端后台程序和客户端工具，用来加密远程控件和文件传输过程中的数据。</li>
<li>Telnet 使用纯文本口令，并以明文发送。这些信息可能被截取，口令 kennel 会被检索。</li>
<li>OpenSSH 会自动把 DISPLAY 变量转发给客户主机。</li>
</ul>
<h4 id="2、简述-VNC-软件的组成部分。"><a href="#2、简述-VNC-软件的组成部分。" class="headerlink" title="2、简述 VNC 软件的组成部分。"></a>2、简述 VNC 软件的组成部分。</h4><ul>
<li>VNC 软件要由两个部分组成<ul>
<li>服务端的 VNC server</li>
<li>客户端的 VNC viewer</li>
</ul>
</li>
<li>用户需要先将 VNC server 安装在被远程操控的计算机上后，才能在主控端执行 VNC viewer 进行远程操控。</li>
</ul>
<h2 id="第十四章"><a href="#第十四章" class="headerlink" title="第十四章"></a>第十四章</h2><h4 id="1、简述-NFS-的含义。"><a href="#1、简述-NFS-的含义。" class="headerlink" title="1、简述 NFS 的含义。"></a>1、简述 NFS 的含义。</h4><ul>
<li>NFS（Network File System，网络文件系统）对于在同一个网络上的多个用户间共享目录和文件很有用途。</li>
<li>通过使用 NFS，用户和程序可以像访问本地文件一样访问远程系统上的文件。</li>
</ul>
<h4 id="2、简述-etc-exports-文件内容的格式。"><a href="#2、简述-etc-exports-文件内容的格式。" class="headerlink" title="2、简述 /etc/exports 文件内容的格式。"></a>2、简述 <code>/etc/exports</code> 文件内容的格式。</h4><ul>
<li><code>/etc/exports</code> 文件控制着 NFS 服务器要导出的共享目录以及访问控制。</li>
<li>文件内容的格式：<code>共享目录 客户端 [导出选项]</code> </li>
<li>客户端机器可以是一台计算机，也可以是一个网段，甚至是一个域。</li>
<li>导出选项用来设置客户端访问 NFS 服务器共享目录的权限</li>
</ul>
<h2 id="补充习题"><a href="#补充习题" class="headerlink" title="补充习题"></a>补充习题</h2><h4 id="1、-什么是-LVM？"><a href="#1、-什么是-LVM？" class="headerlink" title="1、 什么是 LVM？"></a>1、 什么是 LVM？</h4><ul>
<li>Logical Volume Manager 逻辑卷管理</li>
<li>它是 Linux 环境下对磁盘分区进行管理的一种机制。屏蔽了底层磁盘布局，便于动态调整磁盘容量。</li>
</ul>
<h4 id="2、-什么是-PV、VG、LV？"><a href="#2、-什么是-PV、VG、LV？" class="headerlink" title="2、 什么是 PV、VG、LV？"></a>2、 什么是 PV、VG、LV？</h4><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>PV（Physical Volume）</td>
<td>物理卷：整个磁盘，或使用 fdisk 等工具建立的普通分区</td>
</tr>
<tr>
<td>VG（Volume Group）</td>
<td>卷组：一个或多个物理卷组合而成的整体</td>
</tr>
<tr>
<td>LV（Logical Volume）</td>
<td>逻辑卷：从卷组中分割出的一块空间，用于建立文件系统</td>
</tr>
</tbody></table>
<h4 id="3、-PV、VG、LV-之间的相互关系？"><a href="#3、-PV、VG、LV-之间的相互关系？" class="headerlink" title="3、 PV、VG、LV 之间的相互关系？"></a>3、 PV、VG、LV 之间的相互关系？</h4><ul>
<li>PV 基本单元为 4MB 大小的 PE（Physical Extent）。</li>
<li>VG 由 N 个 PV 组成。</li>
<li>LV 在 VG 的基础上进行分割。</li>
</ul>
<h4 id="4、-逻辑卷是否可以在线扩容、缩小？"><a href="#4、-逻辑卷是否可以在线扩容、缩小？" class="headerlink" title="4、 逻辑卷是否可以在线扩容、缩小？"></a>4、 逻辑卷是否可以在线扩容、缩小？</h4><ul>
<li>逻辑卷扩容可以在线操作但是缩减必须是离线执行，需要先卸载已挂载的逻辑卷。<ul>
<li><code>lvextend -L +大小 /dev/卷组名/逻辑卷名</code> </li>
<li><code>lvreduce -L +大小 /dev/卷组名/逻辑卷名</code> </li>
</ul>
</li>
</ul>
<h4 id="5、-文件系统是否可以在线扩容和缩小？"><a href="#5、-文件系统是否可以在线扩容和缩小？" class="headerlink" title="5、 文件系统是否可以在线扩容和缩小？"></a>5、 文件系统是否可以在线扩容和缩小？</h4><ul>
<li>逻辑卷扩容可以在线操作但是缩减必须是离线执行，需要先卸载已挂载的逻辑卷。<ul>
<li><code>resize2fs -p 逻辑卷设备名</code> </li>
</ul>
</li>
</ul>
<h4 id="6、-缩小逻辑卷或文件系统应该注意哪些？"><a href="#6、-缩小逻辑卷或文件系统应该注意哪些？" class="headerlink" title="6、 缩小逻辑卷或文件系统应该注意哪些？"></a>6、 缩小逻辑卷或文件系统应该注意哪些？</h4><ul>
<li>扩容逻辑卷我们是先扩大逻辑卷再扩大文件系统，而缩小逻辑卷就需要我们反着来，我们要先缩小文件系统，再去缩小逻辑卷。</li>
<li>缩小文件系统前我们要先对文件系统做个扫描检测，如果我们直接使用 resize2fs 系统会提示让你先对文件系统进行检测，这是为了保护缩减文件系统时不对数据损害。</li>
</ul>
<h4 id="7、-如何创建逻辑卷？"><a href="#7、-如何创建逻辑卷？" class="headerlink" title="7、 如何创建逻辑卷？"></a>7、 如何创建逻辑卷？</h4><p>PV -&gt; VG -&gt; LV -&gt; 格式化，挂载使用文件系统<br>转换物理卷 -&gt; 创建卷组 -&gt; 创建逻辑卷 -&gt; 格式化并挂载<br>pvcreate 设备名<br>vgcreate -s 8M 卷组名 物理卷名1 物理卷名2<br>lvcreate -L 大小 -n 逻辑卷名 卷组名<br>umount 文件夹：卸载文件系统<br>mkfs -t 文件系统 文件夹： 重新格式化<br>vim /etc/fstab： 修改fstan文件<br>mount -a： 重新挂载</p>
<h4 id="8、-卷组的-PE-默认大小是多少？"><a href="#8、-卷组的-PE-默认大小是多少？" class="headerlink" title="8、 卷组的 PE 默认大小是多少？"></a>8、 卷组的 PE 默认大小是多少？</h4><ul>
<li>4MB</li>
</ul>
<h4 id="9、-什么是-SELinux？有什么优点？"><a href="#9、-什么是-SELinux？有什么优点？" class="headerlink" title="9、 什么是 SELinux？有什么优点？"></a>9、 什么是 SELinux？有什么优点？</h4><ul>
<li>SELinux 是一组可确定哪个进程能访问文件、目录、端口等的安全规则。是美国国家安全局对于强制访问控制的实现，是 Linux 上最杰出的新安全子系统。</li>
<li>优点<ul>
<li>对访问的控制彻底化，对于所有文件、目录和端口都可以设定访问策略。</li>
<li>对于进程只赋予最小的权限。</li>
<li>防止权限升级。</li>
</ul>
</li>
</ul>
<h4 id="10、-SELinux-的两种状态分别是什么？"><a href="#10、-SELinux-的两种状态分别是什么？" class="headerlink" title="10、 SELinux 的两种状态分别是什么？"></a>10、 SELinux 的两种状态分别是什么？</h4><ul>
<li>状态 0：permissive<ul>
<li>不会阻止访问，但会记录日志</li>
</ul>
</li>
<li>状态 1：enforcing<ul>
<li>强制开启，每个受限的进程都必然受限</li>
</ul>
</li>
</ul>
<h4 id="11、-如何修改-SELinux-模式？"><a href="#11、-如何修改-SELinux-模式？" class="headerlink" title="11、 如何修改 SELinux 模式？"></a>11、 如何修改 SELinux 模式？</h4><ul>
<li><code>setenforce 0|1</code> </li>
</ul>
<h4 id="12、-SELinux-安全上下文的作用是什么？"><a href="#12、-SELinux-安全上下文的作用是什么？" class="headerlink" title="12、 SELinux 安全上下文的作用是什么？"></a>12、 SELinux 安全上下文的作用是什么？</h4><ul>
<li>在 SELinux 中访问控制属性基本上就是安全上下文。</li>
<li>所有的客体和主体有一个相关的安全上下文。</li>
<li>SELinux 使用进程和客体的安全上下文来进行访问控制。</li>
</ul>
<h4 id="13、-SELinux-安全上下文格式是什么？"><a href="#13、-SELinux-安全上下文格式是什么？" class="headerlink" title="13、 SELinux 安全上下文格式是什么？"></a>13、 SELinux 安全上下文格式是什么？</h4><ul>
<li>一个安全上下文由三部分组成：用户、角色和类型标识符</li>
</ul>
<h4 id="14、-如何修改-SELinux-安全上下文？"><a href="#14、-如何修改-SELinux-安全上下文？" class="headerlink" title="14、 如何修改 SELinux 安全上下文？"></a>14、 如何修改 SELinux 安全上下文？</h4><ul>
<li><code>chcon -t 安全上下文 文件</code> </li>
</ul>
<h4 id="15、-SELinux-布尔值的概念？"><a href="#15、-SELinux-布尔值的概念？" class="headerlink" title="15、 SELinux 布尔值的概念？"></a>15、 SELinux 布尔值的概念？</h4><ul>
<li>SELinux 布尔值是更改 SELinux 策略行为的开关。</li>
<li>SELinux 布尔值是可以启用或禁用的规则。</li>
<li>安全管理员可以使用 SELinux 布尔值来调整策略。</li>
</ul>
<h4 id="16、-SELinux-如何修改布尔值？"><a href="#16、-SELinux-如何修改布尔值？" class="headerlink" title="16、 SELinux 如何修改布尔值？"></a>16、 SELinux 如何修改布尔值？</h4><ul>
<li><code>setsebool P 功能bool值 on|off</code> </li>
</ul>

          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/07/passwdtest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangYunfei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/surftocat.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HuangYunfei's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/07/passwdtest/" itemprop="url">passwdtest</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-07T15:49:22+08:00">
                2020-03-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  0
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    <div>
  
</div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/surftocat.png"
               alt="HuangYunfei" />
          <p class="site-author-name" itemprop="name">HuangYunfei</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/feiyunhuang" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="huangyunfeihyf@outlook.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                    
                      E-Mail
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://waterh2p.cn/" title="WaterH2P" target="_blank">WaterH2P</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://sheltonlee.cn/" title="Shelton Lee" target="_blank">Shelton Lee</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HuangYunfei</span>
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

<!--

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">
    NexT.Pisces
  </a>
</div>

-->

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共22.5k字</span>
</div>
        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>

